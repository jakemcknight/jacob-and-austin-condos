(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const p of s.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwZmZlYmExOS05NTFkLTQxOTgtYmViMy0yMTg0MjY0YWI3N2EiLCJpZCI6Mzg3MTMwLCJpYXQiOjE3NzAyNDg0Nzd9.IqoW2git6t3j4YITrlQTN_U95ox-h-mfrMfON2aGyLw";const Z="AIzaSyB5Tu2LL6QodOX-UOai4L_MsZn6GBvj5ec";console.log("GOOGLE KEY (first 6):",Z.slice(0,6));const r=document.createElement("div");r.textContent="Loading 3D…";r.style.position="absolute";r.style.top="50%";r.style.left="50%";r.style.transform="translate(-50%, -50%)";r.style.backgroundColor="rgba(0, 0, 0, 0.8)";r.style.color="white";r.style.padding="20px 40px";r.style.borderRadius="5px";r.style.fontFamily="sans-serif";r.style.fontSize="18px";r.style.zIndex="10000";document.body.appendChild(r);const c=new Cesium.Viewer("cesiumContainer",{terrain:Cesium.Terrain.fromWorldTerrain(),animation:!1,timeline:!1,baseLayerPicker:!1,geocoder:!1,homeButton:!1,sceneModePicker:!1,navigationHelpButton:!1,requestRenderMode:!0,maximumRenderTimeChange:1/0});c.camera.setView({destination:Cesium.Cartesian3.fromDegrees(-97.76030859124492,30.263199685572566,291.4161544150228),orientation:{heading:Cesium.Math.toRadians(69.47537836441508),pitch:Cesium.Math.toRadians(1.8918136630665472-10),roll:0}});const b=c.scene.screenSpaceCameraController;b.enableRotate=!1;b.enableTilt=!1;b.enableZoom=!1;b.enableLook=!0;b.enableTranslate=!1;b.lookEventTypes=[Cesium.CameraEventType.LEFT_DRAG];b.rotateEventTypes=[];b.tiltEventTypes=[];c.scene.preUpdate.addEventListener(()=>{Math.abs(c.camera.roll)>Cesium.Math.EPSILON6&&c.camera.setView({orientation:{heading:c.camera.heading,pitch:c.camera.pitch,roll:0}})});const K=`https://tile.googleapis.com/v1/3dtiles/root.json?key=${Z}`;console.log("Tiles URL:",K);const _=await Cesium.Cesium3DTileset.fromUrl(K,{maximumScreenSpaceError:24,skipLevelOfDetail:!0,baseScreenSpaceError:1024,skipScreenSpaceErrorFactor:16,skipLevels:1,immediatelyLoadDesiredLevelOfDetail:!1,maximumMemoryUsage:512,cullWithChildrenBounds:!0});c.scene.primitives.add(_);const F=[{name:"3Waller",lat:30.2636556,lon:-97.7363348,type:"condo"},{name:"404 Rio Grande",lat:30.2687242,lon:-97.7501364,type:"condo"},{name:"Alexan Waterloo",lat:30.2710308,lon:-97.7338734,type:"apartment"},{name:"AMLI Downtown",lat:30.265293,lon:-97.746328,type:"apartment"},{name:"AMLI on 2nd",lat:30.2662019,lon:-97.7480112,type:"apartment"},{name:"Ashton Austin",lat:30.2641297,lon:-97.7453625,type:"apartment"},{name:"Camden Rainey Street",lat:30.2603388,lon:-97.738071,type:"apartment"},{name:"Capitol Quarters",lat:30.2750244,lon:-97.7466199,type:"apartment"},{name:"Elle West Ave",lat:30.268646,lon:-97.7530446,type:"apartment"},{name:"Gables Park Plaza",lat:30.2682716,lon:-97.7548273,type:"apartment"},{name:"Gables Park Tower",lat:30.2667539,lon:-97.7547424,type:"apartment"},{name:"Gables Republic Square",lat:30.2673738,lon:-97.7467997,type:"apartment"},{name:"Hanover Brazos St",lat:30.2645712,lon:-97.7424911,type:"apartment"},{name:"Hanover Republic",lat:30.267788,lon:-97.7459658,type:"apartment"},{name:"Lantana",lat:30.2823515,lon:-97.746431,type:"apartment"},{name:"Northshore",lat:30.2653566,lon:-97.7491832,type:"apartment"},{name:"Penthouse",lat:30.2817358,lon:-97.7448273,type:"condo"},{name:"Residences at 6G",lat:30.2696502,lon:-97.7466781,type:"condo"},{name:"Seven",lat:30.2705777,lon:-97.7488733,type:"apartment"},{name:"Sienna at the Thompson",lat:30.2669225,lon:-97.7416013,type:"apartment"},{name:"Skyhouse Austin",lat:30.257024,lon:-97.7390392,type:"apartment"},{name:"The Beverly at Medical Center",lat:30.2696224,lon:-97.735692,type:"apartment"},{name:"The Bowie",lat:30.2689101,lon:-97.7533905,type:"apartment"},{name:"The G",lat:30.2802583,lon:-97.7418612,type:"condo"},{name:"The Monarch by Windsor",lat:30.2690858,lon:-97.7520471,type:"apartment"},{name:"The Quincy",lat:30.2607964,lon:-97.7388694,type:"condo"},{name:"The Shoal",lat:30.2760586,lon:-97.7496873,type:"apartment"},{name:"The Waller",lat:30.2711278,lon:-97.7344463,type:"condo"},{name:"Whitley",lat:30.2650437,lon:-97.742201,type:"apartment"},{name:"Windsor on the Lake",lat:30.2559717,lon:-97.7396004,type:"apartment"},{name:"ATX Tower",lat:30.268662,lon:-97.7460608,type:"condo"},{name:"415 Colorado",lat:30.2672311,lon:-97.7442783,type:"condo"},{name:"Waterline",lat:30.2615462,lon:-97.7391219,type:"condo"},{name:"The Travis",lat:30.260094,lon:-97.7401425,type:"condo"},{name:"Paseo",lat:30.260094,lon:-97.7401425,type:"condo"},{name:"700 River",lat:30.2579816,lon:-97.7387225,type:"condo"},{name:"Austin Proper",lat:30.2662394,lon:-97.7499189,type:"condo"},{name:"Vesper",lat:30.2597364,lon:-97.7375573,type:"condo"},{name:"Plaza Lofts",lat:30.2679234,lon:-97.7464443,type:"condo"},{name:"1704 West Condos",lat:30.2815211,lon:-97.746815,type:"condo"},{name:"Four Seasons",lat:30.2619861,lon:-97.7432297,type:"condo"},{name:"The Modern",lat:30.2604192,lon:-97.7392711,type:"condo"},{name:"The Austonian",lat:30.2648019,lon:-97.7445985,type:"condo"},{name:"W Residences",lat:30.2655902,lon:-97.7465586,type:"condo"},{name:"The Linden",lat:30.2794998,lon:-97.7420515,type:"condo"},{name:"The Independent",lat:30.2677663,lon:-97.7512619,type:"condo"},{name:"70 Rainey",lat:30.2586803,lon:-97.7391402,type:"condo"},{name:"Natiivo",lat:30.2564815,lon:-97.7388538,type:"condo"},{name:"Seaholm Residences",lat:30.2671786,lon:-97.7521108,type:"condo"},{name:"44 East",lat:30.2558158,lon:-97.7390961,type:"condo"},{name:"5th & West",lat:30.2698622,lon:-97.7505104,type:"condo"},{name:"Nokonah",lat:30.2735314,lon:-97.7527068,type:"apartment"},{name:"360 Condos",lat:30.2672801,lon:-97.7497187,type:"condo"},{name:"Spring Condos",lat:30.2689443,lon:-97.7541734,type:"condo"},{name:"1306 West",lat:30.2779487,lon:-97.7481718,type:"condo"},{name:"Westgate Tower",lat:30.2741074,lon:-97.7428798,type:"condo"},{name:"904 West Condos",lat:30.2736945,lon:-97.7497312,type:"condo"},{name:"The Shore",lat:30.2593466,lon:-97.7393206,type:"condo"},{name:"Five Fifty 05",lat:30.265231,lon:-97.7381056,type:"condo"},{name:"Penthouse Condos",lat:30.275913,lon:-97.7441529,type:"condo"},{name:"Austin City Lofts",lat:30.2697168,lon:-97.7516014,type:"condo"},{name:"Brown Building",lat:30.2700066,lon:-97.7438733,type:"condo"},{name:"Cambridge Tower",lat:30.2807704,lon:-97.7403971,type:"condo"},{name:"Celias Court",lat:30.2731851,lon:-97.7473822,type:"condo"},{name:"Milago",lat:30.2569365,lon:-97.7397606,type:"condo"},{name:"Sabine on 5th",lat:30.2654934,lon:-97.7361143,type:"condo"},{name:"Brazos Place",lat:30.2698301,lon:-97.7408344,type:"condo"},{name:"Terrace on Shoal Creek",lat:30.2756567,lon:-97.7503839,type:"apartment"},{name:"Towers of Town Lake",lat:30.2550288,lon:-97.7379358,type:"condo"},{name:"Greenwood Tower",lat:30.2805409,lon:-97.7411384,type:"condo"}];let C=null,T=10,v=0,x=15,$=!0,Y=!1;const U=new Map;async function z(e,t,n,l=3.1,o,s=-10,p=15){const H=`${e},${t}`;if(!U.has(H)){const de=Cesium.Cartographic.fromDegrees(t,e),[pe]=await Cesium.sampleTerrainMostDetailed(c.terrainProvider,[de]);U.set(H,pe.height)}const te=U.get(H)+n*l,ne=Cesium.Cartesian3.fromDegrees(t,e,te),Q=Cesium.Math.toRadians(o),oe=p*Math.sin(Q),le=p*Math.cos(Q),ae=0,se=Cesium.Transforms.eastNorthUpToFixedFrame(ne),ie=new Cesium.Cartesian3(oe,le,ae),re=Cesium.Matrix4.multiplyByPoint(se,ie,new Cesium.Cartesian3);c.camera.setView({destination:re,orientation:{heading:Cesium.Math.toRadians(o),pitch:Cesium.Math.toRadians(s),roll:0}}),c.camera.frustum.fov=Cesium.Math.toRadians(100),c.scene.requestRender()}const i=document.createElement("div");i.style.position="absolute";i.style.top="10px";i.style.left="10px";i.style.backgroundColor="rgba(0, 0, 0, 0.7)";i.style.color="white";i.style.padding="15px";i.style.borderRadius="5px";i.style.fontFamily="sans-serif";i.style.fontSize="14px";i.style.zIndex="1000";const a=document.createElement("button");a.textContent="◀";a.style.position="absolute";a.style.top="5px";a.style.right="5px";a.style.width="25px";a.style.height="25px";a.style.padding="0";a.style.backgroundColor="#555";a.style.color="white";a.style.border="1px solid #666";a.style.borderRadius="3px";a.style.cursor="pointer";a.style.fontSize="12px";a.title="Collapse panel";i.appendChild(a);const y=document.createElement("div");let q=!1;a.onclick=()=>{q=!q,q?(y.style.display="none",i.style.padding="5px",i.style.width="35px",a.textContent="▶",a.title="Expand panel"):(y.style.display="block",i.style.padding="15px",i.style.width="auto",a.textContent="◀",a.title="Collapse panel")};const A=document.createElement("div");A.textContent="Building:";A.style.marginBottom="8px";A.style.fontWeight="bold";y.appendChild(A);const d=document.createElement("select");d.style.width="100%";d.style.padding="5px";d.style.marginBottom="15px";d.style.backgroundColor="#333";d.style.color="white";d.style.border="1px solid #555";d.style.borderRadius="3px";d.style.fontSize="14px";function J(){d.innerHTML="";const e=document.createElement("option");e.value="",e.textContent="Select a building",e.disabled=!0,e.selected=C===null,d.appendChild(e),F.map((n,l)=>({building:n,index:l})).filter(({building:n})=>n.type==="condo"&&$||n.type==="apartment"&&Y).sort((n,l)=>n.building.name.localeCompare(l.building.name)).forEach(({building:n,index:l})=>{const o=document.createElement("option");o.value=l,o.textContent=n.name,C===l&&(o.selected=!0),d.appendChild(o)})}d.onchange=()=>{if(d.value==="")return;C=parseInt(d.value);const e=F[C];z(e.lat,e.lon,T,3.1,v,-10,x)};J();y.appendChild(d);const N=document.createElement("div");N.textContent="Floor:";N.style.marginBottom="8px";N.style.fontWeight="bold";y.appendChild(N);const O=document.createElement("div");O.style.marginBottom="15px";const ce=[5,10,15,20,25,30,35,40];ce.forEach(e=>{const t=document.createElement("button");t.textContent=e,t.style.margin="2px",t.style.padding="5px 10px",t.style.backgroundColor=e===T?"#4CAF50":"#555",t.style.color="white",t.style.border="none",t.style.borderRadius="3px",t.style.cursor="pointer",t.onclick=()=>{if(T=e,ye(),C!==null){const n=F[C];z(n.lat,n.lon,T,3.1,v,-10,x)}},t.dataset.floor=e,O.appendChild(t)});y.appendChild(O);const P=document.createElement("div");P.textContent="Direction:";P.style.marginBottom="8px";P.style.fontWeight="bold";y.appendChild(P);const D=document.createElement("div");D.style.marginBottom="15px";const me=[{label:"N",heading:0},{label:"NE",heading:45},{label:"E",heading:90},{label:"SE",heading:135},{label:"S",heading:180},{label:"SW",heading:225},{label:"W",heading:270},{label:"NW",heading:315}];me.forEach(e=>{const t=document.createElement("button");t.textContent=e.label,t.style.margin="2px",t.style.padding="5px 10px",t.style.backgroundColor=e.heading===v?"#4CAF50":"#555",t.style.color="white",t.style.border="none",t.style.borderRadius="3px",t.style.cursor="pointer",t.onclick=()=>{if(v=e.heading,ue(),C!==null){const n=F[C];z(n.lat,n.lon,T,3.1,v,-10,x)}},t.dataset.heading=e.heading,D.appendChild(t)});y.appendChild(D);const G=document.createElement("div");G.style.borderTop="1px solid #555";G.style.marginTop="15px";G.style.marginBottom="15px";y.appendChild(G);const m=document.createElement("button");m.textContent="▶ More Features";m.style.width="100%";m.style.padding="8px";m.style.backgroundColor="#444";m.style.color="white";m.style.border="1px solid #555";m.style.borderRadius="3px";m.style.cursor="pointer";m.style.fontSize="12px";m.style.textAlign="left";y.appendChild(m);const u=document.createElement("div");u.style.display="none";u.style.marginTop="12px";u.style.paddingTop="12px";u.style.borderTop="1px solid #555";let W=!1;m.onclick=()=>{W=!W,u.style.display=W?"block":"none",m.textContent=W?"▼ More Features":"▶ More Features"};const M=document.createElement("div");M.textContent="Building Types:";M.style.fontSize="12px";M.style.fontWeight="bold";M.style.marginBottom="8px";u.appendChild(M);const L=document.createElement("div");L.style.marginBottom="8px";L.style.display="flex";L.style.alignItems="center";L.style.gap="8px";const w=document.createElement("input");w.type="checkbox";w.id="condoFilter";w.checked=$;w.style.cursor="pointer";const I=document.createElement("label");I.htmlFor="condoFilter";I.textContent="Show Condos";I.style.fontSize="12px";I.style.cursor="pointer";w.onchange=()=>{$=w.checked,J()};L.appendChild(w);L.appendChild(I);u.appendChild(L);const k=document.createElement("div");k.style.marginBottom="15px";k.style.display="flex";k.style.alignItems="center";k.style.gap="8px";const S=document.createElement("input");S.type="checkbox";S.id="apartmentFilter";S.checked=Y;S.style.cursor="pointer";const R=document.createElement("label");R.htmlFor="apartmentFilter";R.textContent="Show Apartments";R.style.fontSize="12px";R.style.cursor="pointer";S.onchange=()=>{Y=S.checked,J()};k.appendChild(S);k.appendChild(R);u.appendChild(k);const B=document.createElement("div");B.textContent=`Edge offset (m): ${x}`;B.style.marginBottom="8px";B.style.fontWeight="bold";B.style.fontSize="12px";u.appendChild(B);const f=document.createElement("input");f.type="range";f.min="0";f.max="40";f.value=x.toString();f.style.width="100%";f.style.marginBottom="0";f.oninput=()=>{if(x=parseInt(f.value),B.textContent=`Edge offset (m): ${x}`,C!==null){const e=F[C];z(e.lat,e.lon,T,3.1,v,-10,x)}};u.appendChild(f);const E=document.createElement("div");E.textContent="Map data: Google 3D Tiles (Feb 2025)";E.style.fontSize="10px";E.style.color="#999";E.style.marginTop="15px";E.style.paddingTop="15px";E.style.borderTop="1px solid #555";E.style.textAlign="center";u.appendChild(E);y.appendChild(u);i.appendChild(y);document.body.appendChild(i);const g=document.createElement("div");g.style.position="absolute";g.style.top="10px";g.style.right="10px";g.style.width="200px";g.style.height="40px";g.style.backgroundColor="transparent";g.style.overflow="hidden";g.style.zIndex="999";g.style.pointerEvents="none";const h=document.createElement("div");h.style.position="absolute";h.style.top="0";h.style.left="50%";h.style.height="100%";h.style.display="flex";h.style.alignItems="center";h.style.transition="transform 0.2s ease";g.appendChild(h);const j=[{deg:0,label:"N"},{deg:45,label:"NE"},{deg:90,label:"E"},{deg:135,label:"SE"},{deg:180,label:"S"},{deg:225,label:"SW"},{deg:270,label:"W"},{deg:315,label:"NW"},{deg:360,label:"N"}],V=2;j.forEach((e,t)=>{const n=document.createElement("div");n.style.position="absolute",n.style.left=`${e.deg*V}px`,n.style.display="flex",n.style.flexDirection="column",n.style.alignItems="center";const l=document.createElement("div");l.textContent=e.label,l.style.color="white",l.style.fontSize="11px",l.style.fontWeight="bold",l.style.fontFamily="sans-serif",l.style.textShadow="0 0 3px rgba(0,0,0,0.8)",l.style.marginBottom="2px",n.appendChild(l);const o=document.createElement("div");if(o.style.width="1px",o.style.height="12px",o.style.backgroundColor="white",o.style.boxShadow="0 0 2px rgba(0,0,0,0.8)",n.appendChild(o),t<j.length-1)for(let s=15;s<45;s+=15){const p=document.createElement("div");p.style.position="absolute",p.style.left=`${(e.deg+s)*V}px`,p.style.width="1px",p.style.height="6px",p.style.backgroundColor="rgba(255,255,255,0.5)",p.style.marginTop="20px",h.appendChild(p)}h.appendChild(n)});document.body.appendChild(g);function ee(){const n=-((Cesium.Math.toDegrees(c.camera.heading)%360+360)%360)*V;h.style.transform=`translateX(${n}px)`}c.scene.postRender.addEventListener(ee);ee();function ye(){O.querySelectorAll("button").forEach(e=>{e.style.backgroundColor=parseInt(e.dataset.floor)===T?"#4CAF50":"#555"})}function ue(){D.querySelectorAll("button").forEach(e=>{e.style.backgroundColor=parseInt(e.dataset.heading)===v?"#4CAF50":"#555"})}const X=setTimeout(()=>{console.log("Timeout: hiding loading overlay"),r.style.display="none"},1e4);_.readyPromise.then(()=>{console.log("Tileset ready"),clearTimeout(X),r.style.display="none",console.log("Loading complete, overlay hidden")}).catch(e=>{console.error("Error loading tileset:",e),clearTimeout(X),r.textContent="Error loading 3D tiles",r.style.backgroundColor="rgba(139, 0, 0, 0.8)"});
