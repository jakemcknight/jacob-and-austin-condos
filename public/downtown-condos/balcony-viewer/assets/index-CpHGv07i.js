(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))S(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const T of r.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&S(T)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function S(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwZmZlYmExOS05NTFkLTQxOTgtYmViMy0yMTg0MjY0YWI3N2EiLCJpZCI6Mzg3MTMwLCJpYXQiOjE3NzAyNDg0Nzd9.IqoW2git6t3j4YITrlQTN_U95ox-h-mfrMfON2aGyLw";const V="AIzaSyB5Tu2LL6QodOX-UOai4L_MsZn6GBvj5ec";console.log("GOOGLE KEY (first 6):",V.slice(0,6));const a=document.createElement("div");a.textContent="Loading 3D…";a.style.position="absolute";a.style.top="50%";a.style.left="50%";a.style.transform="translate(-50%, -50%)";a.style.backgroundColor="rgba(0, 0, 0, 0.8)";a.style.color="white";a.style.padding="20px 40px";a.style.borderRadius="5px";a.style.fontFamily="sans-serif";a.style.fontSize="18px";a.style.zIndex="10000";document.body.appendChild(a);const d=new Cesium.Viewer("cesiumContainer",{terrain:Cesium.Terrain.fromWorldTerrain(),animation:!1,timeline:!1,baseLayerPicker:!1,geocoder:!1,homeButton:!1,sceneModePicker:!1,navigationHelpButton:!1,requestRenderMode:!0,maximumRenderTimeChange:1/0});d.camera.setView({destination:Cesium.Cartesian3.fromDegrees(-97.76030859124492,30.263199685572566,291.4161544150228),orientation:{heading:Cesium.Math.toRadians(69.47537836441508),pitch:Cesium.Math.toRadians(1.8918136630665472-10),roll:0}});const u=d.scene.screenSpaceCameraController;u.enableRotate=!1;u.enableTilt=!1;u.enableZoom=!1;u.enableLook=!0;u.enableTranslate=!1;u.lookEventTypes=[Cesium.CameraEventType.LEFT_DRAG];u.rotateEventTypes=[];u.tiltEventTypes=[];d.scene.preUpdate.addEventListener(()=>{Math.abs(d.camera.roll)>Cesium.Math.EPSILON6&&d.camera.setView({orientation:{heading:d.camera.heading,pitch:d.camera.pitch,roll:0}})});const Y=`https://tile.googleapis.com/v1/3dtiles/root.json?key=${V}`;console.log("Tiles URL:",Y);const J=await Cesium.Cesium3DTileset.fromUrl(Y,{maximumScreenSpaceError:24,skipLevelOfDetail:!0,baseScreenSpaceError:1024,skipScreenSpaceErrorFactor:16,skipLevels:1,immediatelyLoadDesiredLevelOfDetail:!1,maximumMemoryUsage:512,cullWithChildrenBounds:!0});d.scene.primitives.add(J);const w=[{name:"3Waller",lat:30.2636556,lon:-97.7363348,type:"condo"},{name:"404 Rio Grande",lat:30.2687242,lon:-97.7501364,type:"condo"},{name:"Alexan Waterloo",lat:30.2710308,lon:-97.7338734,type:"apartment"},{name:"AMLI Downtown",lat:30.265293,lon:-97.746328,type:"apartment"},{name:"AMLI on 2nd",lat:30.2662019,lon:-97.7480112,type:"apartment"},{name:"Ashton Austin",lat:30.2641297,lon:-97.7453625,type:"apartment"},{name:"Camden Rainey Street",lat:30.2603388,lon:-97.738071,type:"apartment"},{name:"Capitol Quarters",lat:30.2750244,lon:-97.7466199,type:"apartment"},{name:"Elle West Ave",lat:30.268646,lon:-97.7530446,type:"apartment"},{name:"Gables Park Plaza",lat:30.2682716,lon:-97.7548273,type:"apartment"},{name:"Gables Park Tower",lat:30.2667539,lon:-97.7547424,type:"apartment"},{name:"Gables Republic Square",lat:30.2673738,lon:-97.7467997,type:"apartment"},{name:"Hanover Brazos St",lat:30.2645712,lon:-97.7424911,type:"apartment"},{name:"Hanover Republic",lat:30.267788,lon:-97.7459658,type:"apartment"},{name:"Lantana",lat:30.2823515,lon:-97.746431,type:"apartment"},{name:"Northshore",lat:30.2653566,lon:-97.7491832,type:"apartment"},{name:"Penthouse",lat:30.2817358,lon:-97.7448273,type:"condo"},{name:"Residences at 6G",lat:30.2696502,lon:-97.7466781,type:"condo"},{name:"Seven",lat:30.2705777,lon:-97.7488733,type:"apartment"},{name:"Sienna at the Thompson",lat:30.2669225,lon:-97.7416013,type:"apartment"},{name:"Skyhouse Austin",lat:30.257024,lon:-97.7390392,type:"apartment"},{name:"The Beverly at Medical Center",lat:30.2696224,lon:-97.735692,type:"apartment"},{name:"The Bowie",lat:30.2689101,lon:-97.7533905,type:"apartment"},{name:"The G",lat:30.2802583,lon:-97.7418612,type:"condo"},{name:"The Monarch by Windsor",lat:30.2690858,lon:-97.7520471,type:"apartment"},{name:"The Quincy",lat:30.2607964,lon:-97.7388694,type:"condo"},{name:"The Shoal",lat:30.2760586,lon:-97.7496873,type:"apartment"},{name:"The Waller",lat:30.2711278,lon:-97.7344463,type:"condo"},{name:"Whitley",lat:30.2650437,lon:-97.742201,type:"apartment"},{name:"Windsor on the Lake",lat:30.2559717,lon:-97.7396004,type:"apartment"},{name:"ATX Tower",lat:30.268662,lon:-97.7460608,type:"condo"},{name:"415 Colorado",lat:30.2672311,lon:-97.7442783,type:"condo"},{name:"Waterline",lat:30.2615462,lon:-97.7391219,type:"condo"},{name:"The Travis",lat:30.260094,lon:-97.7401425,type:"condo"},{name:"Paseo",lat:30.260094,lon:-97.7401425,type:"condo"},{name:"700 River",lat:30.2579816,lon:-97.7387225,type:"condo"},{name:"Austin Proper",lat:30.2662394,lon:-97.7499189,type:"condo"},{name:"Vesper",lat:30.2597364,lon:-97.7375573,type:"condo"},{name:"Plaza Lofts",lat:30.2679234,lon:-97.7464443,type:"condo"},{name:"1704 West Condos",lat:30.2815211,lon:-97.746815,type:"condo"},{name:"Four Seasons",lat:30.2619861,lon:-97.7432297,type:"condo"},{name:"The Modern",lat:30.2604192,lon:-97.7392711,type:"condo"},{name:"The Austonian",lat:30.2648019,lon:-97.7445985,type:"condo"},{name:"W Residences",lat:30.2655902,lon:-97.7465586,type:"condo"},{name:"The Linden",lat:30.2794998,lon:-97.7420515,type:"condo"},{name:"The Independent",lat:30.2677663,lon:-97.7512619,type:"condo"},{name:"70 Rainey",lat:30.2586803,lon:-97.7391402,type:"condo"},{name:"Natiivo",lat:30.2564815,lon:-97.7388538,type:"condo"},{name:"Seaholm Residences",lat:30.2671786,lon:-97.7521108,type:"condo"},{name:"44 East",lat:30.2558158,lon:-97.7390961,type:"condo"},{name:"5th & West",lat:30.2698622,lon:-97.7505104,type:"condo"},{name:"Nokonah",lat:30.2735314,lon:-97.7527068,type:"apartment"},{name:"360 Condos",lat:30.2672801,lon:-97.7497187,type:"condo"},{name:"Spring Condos",lat:30.2689443,lon:-97.7541734,type:"condo"},{name:"1306 West",lat:30.2779487,lon:-97.7481718,type:"condo"},{name:"Westgate Tower",lat:30.2741074,lon:-97.7428798,type:"condo"},{name:"904 West Condos",lat:30.2736945,lon:-97.7497312,type:"condo"},{name:"The Shore",lat:30.2593466,lon:-97.7393206,type:"condo"},{name:"Five Fifty 05",lat:30.265231,lon:-97.7381056,type:"condo"},{name:"Penthouse Condos",lat:30.275913,lon:-97.7441529,type:"condo"},{name:"Austin City Lofts",lat:30.2697168,lon:-97.7516014,type:"condo"},{name:"Brown Building",lat:30.2700066,lon:-97.7438733,type:"condo"},{name:"Cambridge Tower",lat:30.2807704,lon:-97.7403971,type:"condo"},{name:"Celias Court",lat:30.2731851,lon:-97.7473822,type:"condo"},{name:"Milago",lat:30.2569365,lon:-97.7397606,type:"condo"},{name:"Sabine on 5th",lat:30.2654934,lon:-97.7361143,type:"condo"},{name:"Brazos Place",lat:30.2698301,lon:-97.7408344,type:"condo"},{name:"Terrace on Shoal Creek",lat:30.2756567,lon:-97.7503839,type:"apartment"},{name:"Towers of Town Lake",lat:30.2550288,lon:-97.7379358,type:"condo"},{name:"Greenwood Tower",lat:30.2805409,lon:-97.7411384,type:"condo"}];let p=null,h=10,g=0,y=15,D=!0,G=!1;const P=new Map;async function B(t,e,s,S=3.1,n,r=-10,T=15){const N=`${t},${e}`;if(!P.has(N)){const te=Cesium.Cartographic.fromDegrees(e,t),[ne]=await Cesium.sampleTerrainMostDetailed(d.terrainProvider,[te]);P.set(N,ne.height)}const Q=P.get(N)+s*S,j=Cesium.Cartesian3.fromDegrees(e,t,Q),q=Cesium.Math.toRadians(n),Z=T*Math.sin(q),$=T*Math.cos(q),K=0,X=Cesium.Transforms.eastNorthUpToFixedFrame(j),_=new Cesium.Cartesian3(Z,$,K),ee=Cesium.Matrix4.multiplyByPoint(X,_,new Cesium.Cartesian3);d.camera.setView({destination:ee,orientation:{heading:Cesium.Math.toRadians(n),pitch:Cesium.Math.toRadians(r),roll:0}}),d.camera.frustum.fov=Cesium.Math.toRadians(100),d.scene.requestRender()}const o=document.createElement("div");o.style.position="absolute";o.style.top="10px";o.style.left="10px";o.style.backgroundColor="rgba(0, 0, 0, 0.7)";o.style.color="white";o.style.padding="15px";o.style.borderRadius="5px";o.style.fontFamily="sans-serif";o.style.fontSize="14px";o.style.zIndex="1000";const E=document.createElement("div");E.textContent="Map data: Google 3D Tiles (Feb 2025)";E.style.fontSize="10px";E.style.color="#999";E.style.marginBottom="12px";E.style.textAlign="center";o.appendChild(E);const R=document.createElement("div");R.textContent="Building:";R.style.marginBottom="8px";R.style.fontWeight="bold";o.appendChild(R);const l=document.createElement("select");l.style.width="100%";l.style.padding="5px";l.style.marginBottom="15px";l.style.backgroundColor="#333";l.style.color="white";l.style.border="1px solid #555";l.style.borderRadius="3px";l.style.fontSize="14px";function U(){l.innerHTML="";const t=document.createElement("option");t.value="",t.textContent="Select a building",t.disabled=!0,t.selected=p===null,l.appendChild(t),w.forEach((e,s)=>{if(e.type==="condo"&&D||e.type==="apartment"&&G){const n=document.createElement("option");n.value=s,n.textContent=e.name,p===s&&(n.selected=!0),l.appendChild(n)}})}l.onchange=()=>{if(l.value==="")return;p=parseInt(l.value);const t=w[p];B(t.lat,t.lon,h,3.1,g,-10,y)};U();o.appendChild(l);const I=document.createElement("div");I.textContent="Floor:";I.style.marginBottom="8px";I.style.fontWeight="bold";o.appendChild(I);const A=document.createElement("div");A.style.marginBottom="15px";const oe=[5,10,15,20,25,30,35,40];oe.forEach(t=>{const e=document.createElement("button");e.textContent=t,e.style.margin="2px",e.style.padding="5px 10px",e.style.backgroundColor=t===h?"#4CAF50":"#555",e.style.color="white",e.style.border="none",e.style.borderRadius="3px",e.style.cursor="pointer",e.onclick=()=>{if(h=t,le(),p!==null){const s=w[p];B(s.lat,s.lon,h,3.1,g,-10,y)}},e.dataset.floor=t,A.appendChild(e)});o.appendChild(A);const W=document.createElement("div");W.textContent="Direction:";W.style.marginBottom="8px";W.style.fontWeight="bold";o.appendChild(W);const O=document.createElement("div");O.style.marginBottom="15px";const ae=[{label:"N",heading:0},{label:"NE",heading:45},{label:"E",heading:90},{label:"SE",heading:135},{label:"S",heading:180},{label:"SW",heading:225},{label:"W",heading:270},{label:"NW",heading:315}];ae.forEach(t=>{const e=document.createElement("button");e.textContent=t.label,e.style.margin="2px",e.style.padding="5px 10px",e.style.backgroundColor=t.heading===g?"#4CAF50":"#555",e.style.color="white",e.style.border="none",e.style.borderRadius="3px",e.style.cursor="pointer",e.onclick=()=>{if(g=t.heading,re(),p!==null){const s=w[p];B(s.lat,s.lon,h,3.1,g,-10,y)}},e.dataset.heading=t.heading,O.appendChild(e)});o.appendChild(O);const z=document.createElement("div");z.style.borderTop="1px solid #555";z.style.marginTop="15px";z.style.marginBottom="15px";o.appendChild(z);const i=document.createElement("button");i.textContent="▶ More Features";i.style.width="100%";i.style.padding="8px";i.style.backgroundColor="#444";i.style.color="white";i.style.border="1px solid #555";i.style.borderRadius="3px";i.style.cursor="pointer";i.style.fontSize="12px";i.style.textAlign="left";o.appendChild(i);const c=document.createElement("div");c.style.display="none";c.style.marginTop="12px";c.style.paddingTop="12px";c.style.borderTop="1px solid #555";let M=!1;i.onclick=()=>{M=!M,c.style.display=M?"block":"none",i.textContent=M?"▼ More Features":"▶ More Features"};const L=document.createElement("div");L.textContent="Building Types:";L.style.fontSize="12px";L.style.fontWeight="bold";L.style.marginBottom="8px";c.appendChild(L);const b=document.createElement("div");b.style.marginBottom="8px";b.style.display="flex";b.style.alignItems="center";b.style.gap="8px";const C=document.createElement("input");C.type="checkbox";C.id="condoFilter";C.checked=D;C.style.cursor="pointer";const k=document.createElement("label");k.htmlFor="condoFilter";k.textContent="Show Condos";k.style.fontSize="12px";k.style.cursor="pointer";C.onchange=()=>{D=C.checked,U()};b.appendChild(C);b.appendChild(k);c.appendChild(b);const x=document.createElement("div");x.style.marginBottom="15px";x.style.display="flex";x.style.alignItems="center";x.style.gap="8px";const f=document.createElement("input");f.type="checkbox";f.id="apartmentFilter";f.checked=G;f.style.cursor="pointer";const F=document.createElement("label");F.htmlFor="apartmentFilter";F.textContent="Show Apartments";F.style.fontSize="12px";F.style.cursor="pointer";f.onchange=()=>{G=f.checked,U()};x.appendChild(f);x.appendChild(F);c.appendChild(x);const v=document.createElement("div");v.textContent=`Edge offset (m): ${y}`;v.style.marginBottom="8px";v.style.fontWeight="bold";v.style.fontSize="12px";c.appendChild(v);const m=document.createElement("input");m.type="range";m.min="0";m.max="40";m.value=y.toString();m.style.width="100%";m.style.marginBottom="0";m.oninput=()=>{if(y=parseInt(m.value),v.textContent=`Edge offset (m): ${y}`,p!==null){const t=w[p];B(t.lat,t.lon,h,3.1,g,-10,y)}};c.appendChild(m);o.appendChild(c);document.body.appendChild(o);function le(){A.querySelectorAll("button").forEach(t=>{t.style.backgroundColor=parseInt(t.dataset.floor)===h?"#4CAF50":"#555"})}function re(){O.querySelectorAll("button").forEach(t=>{t.style.backgroundColor=parseInt(t.dataset.heading)===g?"#4CAF50":"#555"})}const H=setTimeout(()=>{console.log("Timeout: hiding loading overlay"),a.style.display="none"},1e4);J.readyPromise.then(()=>{console.log("Tileset ready"),clearTimeout(H),a.style.display="none",console.log("Loading complete, overlay hidden")}).catch(t=>{console.error("Error loading tileset:",t),clearTimeout(H),a.textContent="Error loading 3D tiles",a.style.backgroundColor="rgba(139, 0, 0, 0.8)"});
