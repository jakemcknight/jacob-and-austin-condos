(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))F(n);new MutationObserver(n=>{for(const p of n)if(p.type==="childList")for(const w of p.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&F(w)}).observe(document,{childList:!0,subtree:!0});function r(n){const p={};return n.integrity&&(p.integrity=n.integrity),n.referrerPolicy&&(p.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?p.credentials="include":n.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function F(n){if(n.ep)return;n.ep=!0;const p=r(n);fetch(n.href,p)}})();Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwZmZlYmExOS05NTFkLTQxOTgtYmViMy0yMTg0MjY0YWI3N2EiLCJpZCI6Mzg3MTMwLCJpYXQiOjE3NzAyNDg0Nzd9.IqoW2git6t3j4YITrlQTN_U95ox-h-mfrMfON2aGyLw";const Z="AIzaSyB5Tu2LL6QodOX-UOai4L_MsZn6GBvj5ec";console.log("GOOGLE KEY (first 6):",Z.slice(0,6));const s=document.createElement("div");s.textContent="Loading 3D…";s.style.position="absolute";s.style.top="50%";s.style.left="50%";s.style.transform="translate(-50%, -50%)";s.style.backgroundColor="rgba(0, 0, 0, 0.8)";s.style.color="white";s.style.padding="20px 40px";s.style.borderRadius="5px";s.style.fontFamily="sans-serif";s.style.fontSize="18px";s.style.zIndex="10000";document.body.appendChild(s);const d=new Cesium.Viewer("cesiumContainer",{terrain:Cesium.Terrain.fromWorldTerrain(),animation:!1,timeline:!1,baseLayerPicker:!1,geocoder:!1,homeButton:!1,sceneModePicker:!1,navigationHelpButton:!1,requestRenderMode:!0,maximumRenderTimeChange:1/0});d.camera.setView({destination:Cesium.Cartesian3.fromDegrees(-97.76030859124492,30.263199685572566,291.4161544150228),orientation:{heading:Cesium.Math.toRadians(69.47537836441508),pitch:Cesium.Math.toRadians(1.8918136630665472-10),roll:0}});const C=d.scene.screenSpaceCameraController;C.enableRotate=!1;C.enableTilt=!1;C.enableZoom=!1;C.enableLook=!0;C.enableTranslate=!1;C.lookEventTypes=[Cesium.CameraEventType.LEFT_DRAG];C.rotateEventTypes=[];C.tiltEventTypes=[];d.scene.preUpdate.addEventListener(()=>{Math.abs(d.camera.roll)>Cesium.Math.EPSILON6&&d.camera.setView({orientation:{heading:d.camera.heading,pitch:d.camera.pitch,roll:0}})});const K=`https://tile.googleapis.com/v1/3dtiles/root.json?key=${Z}`;console.log("Tiles URL:",K);const X=await Cesium.Cesium3DTileset.fromUrl(K,{maximumScreenSpaceError:24,skipLevelOfDetail:!0,baseScreenSpaceError:1024,skipScreenSpaceErrorFactor:16,skipLevels:1,immediatelyLoadDesiredLevelOfDetail:!1,maximumMemoryUsage:512,cullWithChildrenBounds:!0});d.scene.primitives.add(X);const R=[{name:"3Waller",lat:30.2636556,lon:-97.7363348,type:"condo"},{name:"404 Rio Grande",lat:30.2687242,lon:-97.7501364,type:"condo"},{name:"Alexan Waterloo",lat:30.2710308,lon:-97.7338734,type:"apartment"},{name:"AMLI Downtown",lat:30.265293,lon:-97.746328,type:"apartment"},{name:"AMLI on 2nd",lat:30.2662019,lon:-97.7480112,type:"apartment"},{name:"Ashton Austin",lat:30.2641297,lon:-97.7453625,type:"apartment"},{name:"Camden Rainey Street",lat:30.2603388,lon:-97.738071,type:"apartment"},{name:"Capitol Quarters",lat:30.2750244,lon:-97.7466199,type:"apartment"},{name:"Elle West Ave",lat:30.268646,lon:-97.7530446,type:"apartment"},{name:"Gables Park Plaza",lat:30.2682716,lon:-97.7548273,type:"apartment"},{name:"Gables Park Tower",lat:30.2667539,lon:-97.7547424,type:"apartment"},{name:"Gables Republic Square",lat:30.2673738,lon:-97.7467997,type:"apartment"},{name:"Hanover Brazos St",lat:30.2645712,lon:-97.7424911,type:"apartment"},{name:"Hanover Republic",lat:30.267788,lon:-97.7459658,type:"apartment"},{name:"Lantana",lat:30.2823515,lon:-97.746431,type:"apartment"},{name:"Northshore",lat:30.2653566,lon:-97.7491832,type:"apartment"},{name:"Penthouse",lat:30.2817358,lon:-97.7448273,type:"condo"},{name:"Residences at 6G",lat:30.2696502,lon:-97.7466781,type:"condo"},{name:"Seven",lat:30.2705777,lon:-97.7488733,type:"apartment"},{name:"Sienna at the Thompson",lat:30.2669225,lon:-97.7416013,type:"apartment"},{name:"Skyhouse Austin",lat:30.257024,lon:-97.7390392,type:"apartment"},{name:"The Beverly at Medical Center",lat:30.2696224,lon:-97.735692,type:"apartment"},{name:"The Bowie",lat:30.2689101,lon:-97.7533905,type:"apartment"},{name:"The G",lat:30.2802583,lon:-97.7418612,type:"condo"},{name:"The Monarch by Windsor",lat:30.2690858,lon:-97.7520471,type:"apartment"},{name:"The Quincy",lat:30.2607964,lon:-97.7388694,type:"condo"},{name:"The Shoal",lat:30.2760586,lon:-97.7496873,type:"apartment"},{name:"The Waller",lat:30.2711278,lon:-97.7344463,type:"condo"},{name:"Whitley",lat:30.2650437,lon:-97.742201,type:"apartment"},{name:"Windsor on the Lake",lat:30.2559717,lon:-97.7396004,type:"apartment"},{name:"ATX Tower",lat:30.268662,lon:-97.7460608,type:"condo"},{name:"415 Colorado",lat:30.2672311,lon:-97.7442783,type:"condo"},{name:"Waterline",lat:30.2615462,lon:-97.7391219,type:"condo"},{name:"The Travis",lat:30.260094,lon:-97.7401425,type:"condo"},{name:"Paseo",lat:30.260094,lon:-97.7401425,type:"condo"},{name:"700 River",lat:30.2579816,lon:-97.7387225,type:"condo"},{name:"Austin Proper",lat:30.2662394,lon:-97.7499189,type:"condo"},{name:"Vesper",lat:30.2597364,lon:-97.7375573,type:"condo"},{name:"Plaza Lofts",lat:30.2679234,lon:-97.7464443,type:"condo"},{name:"1704 West Condos",lat:30.2815211,lon:-97.746815,type:"condo"},{name:"Four Seasons",lat:30.2619861,lon:-97.7432297,type:"condo"},{name:"The Modern",lat:30.2604192,lon:-97.7392711,type:"condo"},{name:"The Austonian",lat:30.2648019,lon:-97.7445985,type:"condo"},{name:"W Residences",lat:30.2655902,lon:-97.7465586,type:"condo"},{name:"The Linden",lat:30.2794998,lon:-97.7420515,type:"condo"},{name:"The Independent",lat:30.2677663,lon:-97.7512619,type:"condo"},{name:"70 Rainey",lat:30.2586803,lon:-97.7391402,type:"condo"},{name:"Natiivo",lat:30.2564815,lon:-97.7388538,type:"condo"},{name:"Seaholm Residences",lat:30.2671786,lon:-97.7521108,type:"condo"},{name:"44 East",lat:30.2558158,lon:-97.7390961,type:"condo"},{name:"5th & West",lat:30.2698622,lon:-97.7505104,type:"condo"},{name:"Nokonah",lat:30.2735314,lon:-97.7527068,type:"apartment"},{name:"360 Condos",lat:30.2672801,lon:-97.7497187,type:"condo"},{name:"Spring Condos",lat:30.2689443,lon:-97.7541734,type:"condo"},{name:"1306 West",lat:30.2779487,lon:-97.7481718,type:"condo"},{name:"Westgate Tower",lat:30.2741074,lon:-97.7428798,type:"condo"},{name:"904 West Condos",lat:30.2736945,lon:-97.7497312,type:"condo"},{name:"The Shore",lat:30.2593466,lon:-97.7393206,type:"condo"},{name:"Five Fifty 05",lat:30.265231,lon:-97.7381056,type:"condo"},{name:"Penthouse Condos",lat:30.275913,lon:-97.7441529,type:"condo"},{name:"Austin City Lofts",lat:30.2697168,lon:-97.7516014,type:"condo"},{name:"Brown Building",lat:30.2700066,lon:-97.7438733,type:"condo"},{name:"Cambridge Tower",lat:30.2807704,lon:-97.7403971,type:"condo"},{name:"Celias Court",lat:30.2731851,lon:-97.7473822,type:"condo"},{name:"Milago",lat:30.2569365,lon:-97.7397606,type:"condo"},{name:"Sabine on 5th",lat:30.2654934,lon:-97.7361143,type:"condo"},{name:"Brazos Place",lat:30.2698301,lon:-97.7408344,type:"condo"},{name:"Terrace on Shoal Creek",lat:30.2756567,lon:-97.7503839,type:"apartment"},{name:"Towers of Town Lake",lat:30.2550288,lon:-97.7379358,type:"condo"},{name:"Greenwood Tower",lat:30.2805409,lon:-97.7411384,type:"condo"}];let u=null,x=10,b=0,g=15,Y=!0,j=!1;const H=new Map;async function N(e,t,r,F=3.1,n,p=-10,w=15){const q=`${e},${t}`;if(!H.has(q)){const re=Cesium.Cartographic.fromDegrees(t,e),[de]=await Cesium.sampleTerrainMostDetailed(d.terrainProvider,[re]);H.set(q,de.height)}const ee=H.get(q)+r*F,te=Cesium.Cartesian3.fromDegrees(t,e,ee),Q=Cesium.Math.toRadians(n),ne=w*Math.sin(Q),oe=w*Math.cos(Q),ae=0,le=Cesium.Transforms.eastNorthUpToFixedFrame(te),se=new Cesium.Cartesian3(ne,oe,ae),ie=Cesium.Matrix4.multiplyByPoint(le,se,new Cesium.Cartesian3);d.camera.setView({destination:ie,orientation:{heading:Cesium.Math.toRadians(n),pitch:Cesium.Math.toRadians(p),roll:0}}),d.camera.frustum.fov=Cesium.Math.toRadians(100),d.scene.requestRender()}const l=document.createElement("div");l.style.position="absolute";l.style.top="10px";l.style.left="10px";l.style.backgroundColor="rgba(0, 0, 0, 0.7)";l.style.color="white";l.style.padding="15px";l.style.borderRadius="5px";l.style.fontFamily="sans-serif";l.style.fontSize="14px";l.style.zIndex="1000";const o=document.createElement("button");o.textContent="◀";o.style.position="absolute";o.style.top="5px";o.style.right="5px";o.style.width="25px";o.style.height="25px";o.style.padding="0";o.style.backgroundColor="#555";o.style.color="white";o.style.border="1px solid #666";o.style.borderRadius="3px";o.style.cursor="pointer";o.style.fontSize="12px";o.title="Collapse panel";l.appendChild(o);const m=document.createElement("div");let V=!1;o.onclick=()=>{V=!V,V?(m.style.display="none",l.style.padding="5px",l.style.width="35px",o.textContent="▶",o.title="Expand panel"):(m.style.display="block",l.style.padding="15px",l.style.width="auto",o.textContent="◀",o.title="Collapse panel")};const z=document.createElement("div");z.textContent="Building:";z.style.marginBottom="8px";z.style.fontWeight="bold";m.appendChild(z);const i=document.createElement("select");i.style.width="100%";i.style.padding="5px";i.style.marginBottom="15px";i.style.backgroundColor="#333";i.style.color="white";i.style.border="1px solid #555";i.style.borderRadius="3px";i.style.fontSize="14px";function J(){i.innerHTML="";const e=document.createElement("option");e.value="",e.textContent="Select a building",e.disabled=!0,e.selected=u===null,i.appendChild(e),R.forEach((t,r)=>{if(t.type==="condo"&&Y||t.type==="apartment"&&j){const n=document.createElement("option");n.value=r,n.textContent=t.name,u===r&&(n.selected=!0),i.appendChild(n)}})}i.onchange=()=>{if(i.value==="")return;u=parseInt(i.value);const e=R[u];N(e.lat,e.lon,x,3.1,b,-10,g)};J();m.appendChild(i);const O=document.createElement("div");O.textContent="Floor:";O.style.marginBottom="8px";O.style.fontWeight="bold";m.appendChild(O);const P=document.createElement("div");P.style.marginBottom="15px";const pe=[5,10,15,20,25,30,35,40];pe.forEach(e=>{const t=document.createElement("button");t.textContent=e,t.style.margin="2px",t.style.padding="5px 10px",t.style.backgroundColor=e===x?"#4CAF50":"#555",t.style.color="white",t.style.border="none",t.style.borderRadius="3px",t.style.cursor="pointer",t.onclick=()=>{if(x=e,me(),u!==null){const r=R[u];N(r.lat,r.lon,x,3.1,b,-10,g)}},t.dataset.floor=e,P.appendChild(t)});m.appendChild(P);const D=document.createElement("div");D.textContent="Direction:";D.style.marginBottom="8px";D.style.fontWeight="bold";m.appendChild(D);const G=document.createElement("div");G.style.marginBottom="15px";const ce=[{label:"N",heading:0},{label:"NE",heading:45},{label:"E",heading:90},{label:"SE",heading:135},{label:"S",heading:180},{label:"SW",heading:225},{label:"W",heading:270},{label:"NW",heading:315}];ce.forEach(e=>{const t=document.createElement("button");t.textContent=e.label,t.style.margin="2px",t.style.padding="5px 10px",t.style.backgroundColor=e.heading===b?"#4CAF50":"#555",t.style.color="white",t.style.border="none",t.style.borderRadius="3px",t.style.cursor="pointer",t.onclick=()=>{if(b=e.heading,ye(),u!==null){const r=R[u];N(r.lat,r.lon,x,3.1,b,-10,g)}},t.dataset.heading=e.heading,G.appendChild(t)});m.appendChild(G);const U=document.createElement("div");U.style.borderTop="1px solid #555";U.style.marginTop="15px";U.style.marginBottom="15px";m.appendChild(U);const c=document.createElement("button");c.textContent="▶ More Features";c.style.width="100%";c.style.padding="8px";c.style.backgroundColor="#444";c.style.color="white";c.style.border="1px solid #555";c.style.borderRadius="3px";c.style.cursor="pointer";c.style.fontSize="12px";c.style.textAlign="left";m.appendChild(c);const y=document.createElement("div");y.style.display="none";y.style.marginTop="12px";y.style.paddingTop="12px";y.style.borderTop="1px solid #555";let A=!1;c.onclick=()=>{A=!A,y.style.display=A?"block":"none",c.textContent=A?"▼ More Features":"▶ More Features"};const B=document.createElement("div");B.textContent="Building Types:";B.style.fontSize="12px";B.style.fontWeight="bold";B.style.marginBottom="8px";y.appendChild(B);const v=document.createElement("div");v.style.marginBottom="8px";v.style.display="flex";v.style.alignItems="center";v.style.gap="8px";const E=document.createElement("input");E.type="checkbox";E.id="condoFilter";E.checked=Y;E.style.cursor="pointer";const I=document.createElement("label");I.htmlFor="condoFilter";I.textContent="Show Condos";I.style.fontSize="12px";I.style.cursor="pointer";E.onchange=()=>{Y=E.checked,J()};v.appendChild(E);v.appendChild(I);y.appendChild(v);const S=document.createElement("div");S.style.marginBottom="15px";S.style.display="flex";S.style.alignItems="center";S.style.gap="8px";const T=document.createElement("input");T.type="checkbox";T.id="apartmentFilter";T.checked=j;T.style.cursor="pointer";const W=document.createElement("label");W.htmlFor="apartmentFilter";W.textContent="Show Apartments";W.style.fontSize="12px";W.style.cursor="pointer";T.onchange=()=>{j=T.checked,J()};S.appendChild(T);S.appendChild(W);y.appendChild(S);const k=document.createElement("div");k.textContent=`Edge offset (m): ${g}`;k.style.marginBottom="8px";k.style.fontWeight="bold";k.style.fontSize="12px";y.appendChild(k);const h=document.createElement("input");h.type="range";h.min="0";h.max="40";h.value=g.toString();h.style.width="100%";h.style.marginBottom="0";h.oninput=()=>{if(g=parseInt(h.value),k.textContent=`Edge offset (m): ${g}`,u!==null){const e=R[u];N(e.lat,e.lon,x,3.1,b,-10,g)}};y.appendChild(h);const f=document.createElement("div");f.textContent="Map data: Google 3D Tiles (Feb 2025)";f.style.fontSize="10px";f.style.color="#999";f.style.marginTop="15px";f.style.paddingTop="15px";f.style.borderTop="1px solid #555";f.style.textAlign="center";y.appendChild(f);m.appendChild(y);l.appendChild(m);document.body.appendChild(l);const a=document.createElement("div");a.style.position="absolute";a.style.top="10px";a.style.right="10px";a.style.width="80px";a.style.height="80px";a.style.backgroundColor="rgba(0, 0, 0, 0.7)";a.style.borderRadius="50%";a.style.border="2px solid #666";a.style.display="flex";a.style.alignItems="center";a.style.justifyContent="center";a.style.fontFamily="sans-serif";a.style.fontSize="24px";a.style.fontWeight="bold";a.style.color="white";a.style.zIndex="1000";const L=document.createElement("div");L.textContent="N";L.style.position="absolute";L.style.transition="transform 0.3s ease";a.appendChild(L);const M=document.createElement("div");M.style.position="absolute";M.style.width="100%";M.style.height="100%";M.style.borderRadius="50%";M.style.border="1px solid #888";a.appendChild(M);document.body.appendChild(a);function _(){const e=Cesium.Math.toDegrees(d.camera.heading),t=["N","NE","E","SE","S","SW","W","NW"],r=Math.round(e/45)%8;L.textContent=t[r],L.style.transform=`rotate(${e}deg)`}d.scene.postRender.addEventListener(_);_();function me(){P.querySelectorAll("button").forEach(e=>{e.style.backgroundColor=parseInt(e.dataset.floor)===x?"#4CAF50":"#555"})}function ye(){G.querySelectorAll("button").forEach(e=>{e.style.backgroundColor=parseInt(e.dataset.heading)===b?"#4CAF50":"#555"})}const $=setTimeout(()=>{console.log("Timeout: hiding loading overlay"),s.style.display="none"},1e4);X.readyPromise.then(()=>{console.log("Tileset ready"),clearTimeout($),s.style.display="none",console.log("Loading complete, overlay hidden")}).catch(e=>{console.error("Error loading tileset:",e),clearTimeout($),s.textContent="Error loading 3D tiles",s.style.backgroundColor="rgba(139, 0, 0, 0.8)"});
