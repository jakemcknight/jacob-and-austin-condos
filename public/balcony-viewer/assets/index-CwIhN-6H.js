(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&d(p)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}})();Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwZmZlYmExOS05NTFkLTQxOTgtYmViMy0yMTg0MjY0YWI3N2EiLCJpZCI6Mzg3MTMwLCJpYXQiOjE3NzAyNDg0Nzd9.IqoW2git6t3j4YITrlQTN_U95ox-h-mfrMfON2aGyLw";const K="AIzaSyB5Tu2LL6QodOX-UOai4L_MsZn6GBvj5ec";console.log("GOOGLE KEY (first 6):",K.slice(0,6));const i=document.createElement("div");i.textContent="Loading 3D…";i.style.position="absolute";i.style.top="50%";i.style.left="50%";i.style.transform="translate(-50%, -50%)";i.style.backgroundColor="rgba(0, 0, 0, 0.8)";i.style.color="white";i.style.padding="20px 40px";i.style.borderRadius="5px";i.style.fontFamily="sans-serif";i.style.fontSize="18px";i.style.zIndex="10000";document.body.appendChild(i);const c=new Cesium.Viewer("cesiumContainer",{terrain:Cesium.Terrain.fromWorldTerrain(),animation:!1,timeline:!1,baseLayerPicker:!1,geocoder:!1,homeButton:!1,sceneModePicker:!1,navigationHelpButton:!1,requestRenderMode:!0,maximumRenderTimeChange:1/0});c.camera.setView({destination:Cesium.Cartesian3.fromDegrees(-97.76030859124492,30.263199685572566,291.4161544150228),orientation:{heading:Cesium.Math.toRadians(69.47537836441508),pitch:Cesium.Math.toRadians(1.8918136630665472-10),roll:0}});const E=c.scene.screenSpaceCameraController;E.enableRotate=!1;E.enableTilt=!1;E.enableZoom=!1;E.enableLook=!0;E.enableTranslate=!1;E.lookEventTypes=[Cesium.CameraEventType.LEFT_DRAG];E.rotateEventTypes=[];E.tiltEventTypes=[];c.scene.preUpdate.addEventListener(()=>{Math.abs(c.camera.roll)>Cesium.Math.EPSILON6&&c.camera.setView({orientation:{heading:c.camera.heading,pitch:c.camera.pitch,roll:0}})});const _=`https://tile.googleapis.com/v1/3dtiles/root.json?key=${K}`;console.log("Tiles URL:",_);const ee=await Cesium.Cesium3DTileset.fromUrl(_,{maximumScreenSpaceError:24,skipLevelOfDetail:!0,baseScreenSpaceError:1024,skipScreenSpaceErrorFactor:16,skipLevels:1,immediatelyLoadDesiredLevelOfDetail:!1,maximumMemoryUsage:512,cullWithChildrenBounds:!0});c.scene.primitives.add(ee);const B=[{name:"3Waller",lat:30.2636556,lon:-97.7363348,type:"condo"},{name:"404 Rio Grande",lat:30.2687242,lon:-97.7501364,type:"condo"},{name:"Alexan Waterloo",lat:30.2710308,lon:-97.7338734,type:"apartment"},{name:"AMLI Downtown",lat:30.265293,lon:-97.746328,type:"apartment"},{name:"AMLI on 2nd",lat:30.2662019,lon:-97.7480112,type:"apartment"},{name:"Ashton Austin",lat:30.2641297,lon:-97.7453625,type:"apartment"},{name:"Camden Rainey Street",lat:30.2603388,lon:-97.738071,type:"apartment"},{name:"Capitol Quarters",lat:30.2750244,lon:-97.7466199,type:"apartment"},{name:"Elle West Ave",lat:30.268646,lon:-97.7530446,type:"apartment"},{name:"Gables Park Plaza",lat:30.2682716,lon:-97.7548273,type:"apartment"},{name:"Gables Park Tower",lat:30.2667539,lon:-97.7547424,type:"apartment"},{name:"Gables Republic Square",lat:30.2673738,lon:-97.7467997,type:"apartment"},{name:"Hanover Brazos St",lat:30.2645712,lon:-97.7424911,type:"apartment"},{name:"Hanover Republic",lat:30.267788,lon:-97.7459658,type:"apartment"},{name:"Lantana",lat:30.2823515,lon:-97.746431,type:"apartment"},{name:"Northshore",lat:30.2653566,lon:-97.7491832,type:"apartment"},{name:"Penthouse",lat:30.2817358,lon:-97.7448273,type:"condo"},{name:"Residences at 6G",lat:30.2696502,lon:-97.7466781,type:"condo"},{name:"Seven",lat:30.2705777,lon:-97.7488733,type:"apartment"},{name:"Sienna at the Thompson",lat:30.2669225,lon:-97.7416013,type:"apartment"},{name:"Skyhouse Austin",lat:30.257024,lon:-97.7390392,type:"apartment"},{name:"The Beverly at Medical Center",lat:30.2696224,lon:-97.735692,type:"apartment"},{name:"The Bowie",lat:30.2689101,lon:-97.7533905,type:"apartment"},{name:"The G",lat:30.2802583,lon:-97.7418612,type:"condo"},{name:"The Monarch by Windsor",lat:30.2690858,lon:-97.7520471,type:"apartment"},{name:"The Quincy",lat:30.2607964,lon:-97.7388694,type:"condo"},{name:"The Shoal",lat:30.2760586,lon:-97.7496873,type:"apartment"},{name:"The Waller",lat:30.2711278,lon:-97.7344463,type:"condo"},{name:"Whitley",lat:30.2650437,lon:-97.742201,type:"apartment"},{name:"Windsor on the Lake",lat:30.2559717,lon:-97.7396004,type:"apartment"},{name:"ATX Tower",lat:30.268662,lon:-97.7460608,type:"condo"},{name:"415 Colorado",lat:30.2672311,lon:-97.7442783,type:"condo"},{name:"Waterline",lat:30.2615462,lon:-97.7391219,type:"condo"},{name:"The Travis",lat:30.260094,lon:-97.7401425,type:"condo"},{name:"Paseo",lat:30.260094,lon:-97.7401425,type:"condo"},{name:"700 River",lat:30.2579816,lon:-97.7387225,type:"condo"},{name:"Austin Proper",lat:30.2662394,lon:-97.7499189,type:"condo"},{name:"Vesper",lat:30.2597364,lon:-97.7375573,type:"condo"},{name:"Plaza Lofts",lat:30.2679234,lon:-97.7464443,type:"condo"},{name:"1704 West Condos",lat:30.2815211,lon:-97.746815,type:"condo"},{name:"Four Seasons",lat:30.2619861,lon:-97.7432297,type:"condo"},{name:"The Modern",lat:30.2604192,lon:-97.7392711,type:"condo"},{name:"The Austonian",lat:30.2648019,lon:-97.7445985,type:"condo"},{name:"W Residences",lat:30.2655902,lon:-97.7465586,type:"condo"},{name:"The Linden",lat:30.2794998,lon:-97.7420515,type:"condo"},{name:"The Independent",lat:30.2677663,lon:-97.7512619,type:"condo"},{name:"70 Rainey",lat:30.2586803,lon:-97.7391402,type:"condo"},{name:"Natiivo",lat:30.2564815,lon:-97.7388538,type:"condo"},{name:"Seaholm Residences",lat:30.2671786,lon:-97.7521108,type:"condo"},{name:"44 East",lat:30.2558158,lon:-97.7390961,type:"condo"},{name:"5th & West",lat:30.2698622,lon:-97.7505104,type:"condo"},{name:"Nokonah",lat:30.2735314,lon:-97.7527068,type:"apartment"},{name:"360 Condos",lat:30.2672801,lon:-97.7497187,type:"condo"},{name:"Spring Condos",lat:30.2689443,lon:-97.7541734,type:"condo"},{name:"1306 West",lat:30.2779487,lon:-97.7481718,type:"condo"},{name:"Westgate Tower",lat:30.2741074,lon:-97.7428798,type:"condo"},{name:"904 West Condos",lat:30.2736945,lon:-97.7497312,type:"condo"},{name:"The Shore",lat:30.2593466,lon:-97.7393206,type:"condo"},{name:"Five Fifty 05",lat:30.265231,lon:-97.7381056,type:"condo"},{name:"Penthouse Condos",lat:30.275913,lon:-97.7441529,type:"condo"},{name:"Austin City Lofts",lat:30.2697168,lon:-97.7516014,type:"condo"},{name:"Brown Building",lat:30.2700066,lon:-97.7438733,type:"condo"},{name:"Cambridge Tower",lat:30.2807704,lon:-97.7403971,type:"condo"},{name:"Celias Court",lat:30.2731851,lon:-97.7473822,type:"condo"},{name:"Milago",lat:30.2569365,lon:-97.7397606,type:"condo"},{name:"Sabine on 5th",lat:30.2654934,lon:-97.7361143,type:"condo"},{name:"Brazos Place",lat:30.2698301,lon:-97.7408344,type:"condo"},{name:"Terrace on Shoal Creek",lat:30.2756567,lon:-97.7503839,type:"apartment"},{name:"Towers of Town Lake",lat:30.2550288,lon:-97.7379358,type:"condo"},{name:"Greenwood Tower",lat:30.2805409,lon:-97.7411384,type:"condo"}];let C=null,v=10,w=0,b=15,Y=!0,J=!1;const q=new Map;async function A(e,t,o,d=3.1,n,a=-10,p=15){const U=`${e},${t}`;if(!q.has(U)){const pe=Cesium.Cartographic.fromDegrees(t,e),[ce]=await Cesium.sampleTerrainMostDetailed(c.terrainProvider,[pe]);q.set(U,ce.height)}const ne=q.get(U)+o*d,oe=Cesium.Cartesian3.fromDegrees(t,e,ne),X=Cesium.Math.toRadians(n),le=p*Math.sin(X),ae=p*Math.cos(X),se=0,ie=Cesium.Transforms.eastNorthUpToFixedFrame(oe),re=new Cesium.Cartesian3(le,ae,se),de=Cesium.Matrix4.multiplyByPoint(ie,re,new Cesium.Cartesian3);c.camera.setView({destination:de,orientation:{heading:Cesium.Math.toRadians(n),pitch:Cesium.Math.toRadians(a),roll:0}}),c.camera.frustum.fov=Cesium.Math.toRadians(100),c.scene.requestRender()}const s=document.createElement("div");s.style.position="absolute";s.style.top="10px";s.style.left="10px";s.style.backgroundColor="rgba(0, 0, 0, 0.7)";s.style.color="white";s.style.padding="15px";s.style.borderRadius="5px";s.style.fontFamily="sans-serif";s.style.fontSize="14px";s.style.zIndex="1000";const l=document.createElement("button");l.textContent="◀";l.style.position="absolute";l.style.top="5px";l.style.right="5px";l.style.width="25px";l.style.height="25px";l.style.padding="0";l.style.backgroundColor="#555";l.style.color="white";l.style.border="1px solid #666";l.style.borderRadius="3px";l.style.cursor="pointer";l.style.fontSize="12px";l.title="Collapse panel";s.appendChild(l);const u=document.createElement("div");let V=!1;l.onclick=()=>{V=!V,V?(u.style.display="none",s.style.padding="5px",s.style.width="35px",l.textContent="▶",l.title="Expand panel"):(u.style.display="block",s.style.padding="15px",s.style.width="auto",l.textContent="◀",l.title="Collapse panel")};const N=document.createElement("div");N.textContent="Building:";N.style.marginBottom="8px";N.style.fontWeight="bold";u.appendChild(N);const r=document.createElement("select");r.style.width="100%";r.style.padding="5px";r.style.marginBottom="15px";r.style.backgroundColor="#333";r.style.color="white";r.style.border="1px solid #555";r.style.borderRadius="3px";r.style.fontSize="14px";function Q(){r.innerHTML="";const e=document.createElement("option");e.value="",e.textContent="Select a building",e.disabled=!0,e.selected=C===null,r.appendChild(e),B.forEach((t,o)=>{if(t.type==="condo"&&Y||t.type==="apartment"&&J){const n=document.createElement("option");n.value=o,n.textContent=t.name,C===o&&(n.selected=!0),r.appendChild(n)}})}r.onchange=()=>{if(r.value==="")return;C=parseInt(r.value);const e=B[C];A(e.lat,e.lon,v,3.1,w,-10,b)};Q();u.appendChild(r);const O=document.createElement("div");O.textContent="Floor:";O.style.marginBottom="8px";O.style.fontWeight="bold";u.appendChild(O);const P=document.createElement("div");P.style.marginBottom="15px";const me=[5,10,15,20,25,30,35,40];me.forEach(e=>{const t=document.createElement("button");t.textContent=e,t.style.margin="2px",t.style.padding="5px 10px",t.style.backgroundColor=e===v?"#4CAF50":"#555",t.style.color="white",t.style.border="none",t.style.borderRadius="3px",t.style.cursor="pointer",t.onclick=()=>{if(v=e,ue(),C!==null){const o=B[C];A(o.lat,o.lon,v,3.1,w,-10,b)}},t.dataset.floor=e,P.appendChild(t)});u.appendChild(P);const D=document.createElement("div");D.textContent="Direction:";D.style.marginBottom="8px";D.style.fontWeight="bold";u.appendChild(D);const G=document.createElement("div");G.style.marginBottom="15px";const ye=[{label:"N",heading:0},{label:"NE",heading:45},{label:"E",heading:90},{label:"SE",heading:135},{label:"S",heading:180},{label:"SW",heading:225},{label:"W",heading:270},{label:"NW",heading:315}];ye.forEach(e=>{const t=document.createElement("button");t.textContent=e.label,t.style.margin="2px",t.style.padding="5px 10px",t.style.backgroundColor=e.heading===w?"#4CAF50":"#555",t.style.color="white",t.style.border="none",t.style.borderRadius="3px",t.style.cursor="pointer",t.onclick=()=>{if(w=e.heading,he(),C!==null){const o=B[C];A(o.lat,o.lon,v,3.1,w,-10,b)}},t.dataset.heading=e.heading,G.appendChild(t)});u.appendChild(G);const H=document.createElement("div");H.style.borderTop="1px solid #555";H.style.marginTop="15px";H.style.marginBottom="15px";u.appendChild(H);const y=document.createElement("button");y.textContent="▶ More Features";y.style.width="100%";y.style.padding="8px";y.style.backgroundColor="#444";y.style.color="white";y.style.border="1px solid #555";y.style.borderRadius="3px";y.style.cursor="pointer";y.style.fontSize="12px";y.style.textAlign="left";u.appendChild(y);const h=document.createElement("div");h.style.display="none";h.style.marginTop="12px";h.style.paddingTop="12px";h.style.borderTop="1px solid #555";let z=!1;y.onclick=()=>{z=!z,h.style.display=z?"block":"none",y.textContent=z?"▼ More Features":"▶ More Features"};const R=document.createElement("div");R.textContent="Building Types:";R.style.fontSize="12px";R.style.fontWeight="bold";R.style.marginBottom="8px";h.appendChild(R);const k=document.createElement("div");k.style.marginBottom="8px";k.style.display="flex";k.style.alignItems="center";k.style.gap="8px";const S=document.createElement("input");S.type="checkbox";S.id="condoFilter";S.checked=Y;S.style.cursor="pointer";const I=document.createElement("label");I.htmlFor="condoFilter";I.textContent="Show Condos";I.style.fontSize="12px";I.style.cursor="pointer";S.onchange=()=>{Y=S.checked,Q()};k.appendChild(S);k.appendChild(I);h.appendChild(k);const F=document.createElement("div");F.style.marginBottom="15px";F.style.display="flex";F.style.alignItems="center";F.style.gap="8px";const L=document.createElement("input");L.type="checkbox";L.id="apartmentFilter";L.checked=J;L.style.cursor="pointer";const W=document.createElement("label");W.htmlFor="apartmentFilter";W.textContent="Show Apartments";W.style.fontSize="12px";W.style.cursor="pointer";L.onchange=()=>{J=L.checked,Q()};F.appendChild(L);F.appendChild(W);h.appendChild(F);const M=document.createElement("div");M.textContent=`Edge offset (m): ${b}`;M.style.marginBottom="8px";M.style.fontWeight="bold";M.style.fontSize="12px";h.appendChild(M);const f=document.createElement("input");f.type="range";f.min="0";f.max="40";f.value=b.toString();f.style.width="100%";f.style.marginBottom="0";f.oninput=()=>{if(b=parseInt(f.value),M.textContent=`Edge offset (m): ${b}`,C!==null){const e=B[C];A(e.lat,e.lon,v,3.1,w,-10,b)}};h.appendChild(f);const T=document.createElement("div");T.textContent="Map data: Google 3D Tiles (Feb 2025)";T.style.fontSize="10px";T.style.color="#999";T.style.marginTop="15px";T.style.paddingTop="15px";T.style.borderTop="1px solid #555";T.style.textAlign="center";h.appendChild(T);u.appendChild(h);s.appendChild(u);document.body.appendChild(s);const m=document.createElement("div");m.style.position="absolute";m.style.top="10px";m.style.right="10px";m.style.width="200px";m.style.height="40px";m.style.backgroundColor="rgba(0, 0, 0, 0.7)";m.style.borderRadius="5px";m.style.border="1px solid #666";m.style.overflow="hidden";m.style.zIndex="999";m.style.pointerEvents="none";const g=document.createElement("div");g.style.position="absolute";g.style.top="0";g.style.left="50%";g.style.height="100%";g.style.display="flex";g.style.alignItems="center";g.style.transition="transform 0.2s ease";m.appendChild(g);const j=[{deg:0,label:"N"},{deg:45,label:"NE"},{deg:90,label:"E"},{deg:135,label:"SE"},{deg:180,label:"S"},{deg:225,label:"SW"},{deg:270,label:"W"},{deg:315,label:"NW"},{deg:360,label:"N"}],$=2;j.forEach((e,t)=>{const o=document.createElement("div");o.style.position="absolute",o.style.left=`${e.deg*$}px`,o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center";const d=document.createElement("div");d.textContent=e.label,d.style.color="white",d.style.fontSize="11px",d.style.fontWeight="bold",d.style.fontFamily="sans-serif",d.style.textShadow="0 0 3px rgba(0,0,0,0.8)",d.style.marginBottom="2px",o.appendChild(d);const n=document.createElement("div");if(n.style.width="1px",n.style.height="12px",n.style.backgroundColor="white",n.style.boxShadow="0 0 2px rgba(0,0,0,0.8)",o.appendChild(n),t<j.length-1)for(let a=15;a<45;a+=15){const p=document.createElement("div");p.style.position="absolute",p.style.left=`${(e.deg+a)*$}px`,p.style.width="1px",p.style.height="6px",p.style.backgroundColor="rgba(255,255,255,0.5)",p.style.marginTop="20px",g.appendChild(p)}g.appendChild(o)});const x=document.createElement("div");x.style.position="absolute";x.style.left="50%";x.style.top="0";x.style.width="2px";x.style.height="100%";x.style.backgroundColor="rgba(255, 100, 100, 0.9)";x.style.transform="translateX(-50%)";x.style.boxShadow="0 0 4px rgba(255, 100, 100, 0.8)";m.appendChild(x);document.body.appendChild(m);function te(){const o=-((Cesium.Math.toDegrees(c.camera.heading)%360+360)%360)*$;g.style.transform=`translateX(${o}px)`}c.scene.postRender.addEventListener(te);te();function ue(){P.querySelectorAll("button").forEach(e=>{e.style.backgroundColor=parseInt(e.dataset.floor)===v?"#4CAF50":"#555"})}function he(){G.querySelectorAll("button").forEach(e=>{e.style.backgroundColor=parseInt(e.dataset.heading)===w?"#4CAF50":"#555"})}const Z=setTimeout(()=>{console.log("Timeout: hiding loading overlay"),i.style.display="none"},1e4);ee.readyPromise.then(()=>{console.log("Tileset ready"),clearTimeout(Z),i.style.display="none",console.log("Loading complete, overlay hidden")}).catch(e=>{console.error("Error loading tileset:",e),clearTimeout(Z),i.textContent="Error loading 3D tiles",i.style.backgroundColor="rgba(139, 0, 0, 0.8)"});
