(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const C of r.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&c(C)}).observe(document,{childList:!0,subtree:!0});function i(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=i(o);fetch(o.href,r)}})();Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwZmZlYmExOS05NTFkLTQxOTgtYmViMy0yMTg0MjY0YWI3N2EiLCJpZCI6Mzg3MTMwLCJpYXQiOjE3NzAyNDg0Nzd9.IqoW2git6t3j4YITrlQTN_U95ox-h-mfrMfON2aGyLw";const F="AIzaSyB5Tu2LL6QodOX-UOai4L_MsZn6GBvj5ec";console.log("GOOGLE KEY (first 6):",F.slice(0,6));const a=document.createElement("div");a.textContent="Loading 3Dâ€¦";a.style.position="absolute";a.style.top="50%";a.style.left="50%";a.style.transform="translate(-50%, -50%)";a.style.backgroundColor="rgba(0, 0, 0, 0.8)";a.style.color="white";a.style.padding="20px 40px";a.style.borderRadius="5px";a.style.fontFamily="sans-serif";a.style.fontSize="18px";a.style.zIndex="10000";document.body.appendChild(a);const s=new Cesium.Viewer("cesiumContainer",{terrain:Cesium.Terrain.fromWorldTerrain(),animation:!1,timeline:!1,baseLayerPicker:!1,geocoder:!1,homeButton:!1,sceneModePicker:!1,navigationHelpButton:!1,requestRenderMode:!0,maximumRenderTimeChange:1/0});s.camera.setView({destination:Cesium.Cartesian3.fromDegrees(-97.76030859124492,30.263199685572566,291.4161544150228),orientation:{heading:Cesium.Math.toRadians(69.47537836441508),pitch:Cesium.Math.toRadians(1.8918136630665472),roll:0}});const y=s.scene.screenSpaceCameraController;y.enableRotate=!1;y.enableTilt=!1;y.enableZoom=!1;y.enableLook=!0;y.enableTranslate=!1;y.lookEventTypes=[Cesium.CameraEventType.LEFT_DRAG];y.rotateEventTypes=[];y.tiltEventTypes=[];s.scene.preUpdate.addEventListener(()=>{Math.abs(s.camera.roll)>Cesium.Math.EPSILON6&&s.camera.setView({orientation:{heading:s.camera.heading,pitch:s.camera.pitch,roll:0}})});const O=`https://tile.googleapis.com/v1/3dtiles/root.json?key=${F}`;console.log("Tiles URL:",O);const N=await Cesium.Cesium3DTileset.fromUrl(O,{maximumScreenSpaceError:24,skipLevelOfDetail:!0,baseScreenSpaceError:1024,skipScreenSpaceErrorFactor:16,skipLevels:1,immediatelyLoadDesiredLevelOfDetail:!1,maximumMemoryUsage:512,cullWithChildrenBounds:!0});s.scene.primitives.add(N);const x=[{name:"3Waller",lat:30.2636556,lon:-97.7363348,type:"condo"},{name:"404 Rio Grande",lat:30.2687242,lon:-97.7501364,type:"condo"},{name:"Alexan Waterloo",lat:30.2710308,lon:-97.7338734,type:"apartment"},{name:"AMLI Downtown",lat:30.265293,lon:-97.746328,type:"apartment"},{name:"AMLI on 2nd",lat:30.2662019,lon:-97.7480112,type:"apartment"},{name:"Ashton Austin",lat:30.2641297,lon:-97.7453625,type:"apartment"},{name:"Camden Rainey Street",lat:30.2603388,lon:-97.738071,type:"apartment"},{name:"Capitol Quarters",lat:30.2750244,lon:-97.7466199,type:"apartment"},{name:"Elle West Ave",lat:30.268646,lon:-97.7530446,type:"apartment"},{name:"Gables Park Plaza",lat:30.2682716,lon:-97.7548273,type:"apartment"},{name:"Gables Park Tower",lat:30.2667539,lon:-97.7547424,type:"apartment"},{name:"Gables Republic Square",lat:30.2673738,lon:-97.7467997,type:"apartment"},{name:"Hanover Brazos St",lat:30.2645712,lon:-97.7424911,type:"apartment"},{name:"Hanover Republic",lat:30.267788,lon:-97.7459658,type:"apartment"},{name:"Lantana",lat:30.2823515,lon:-97.746431,type:"apartment"},{name:"Northshore",lat:30.2653566,lon:-97.7491832,type:"apartment"},{name:"Penthouse",lat:30.2817358,lon:-97.7448273,type:"condo"},{name:"Residences at 6G",lat:30.2696502,lon:-97.7466781,type:"condo"},{name:"Seven",lat:30.2705777,lon:-97.7488733,type:"apartment"},{name:"Sienna at the Thompson",lat:30.2669225,lon:-97.7416013,type:"apartment"},{name:"Skyhouse Austin",lat:30.257024,lon:-97.7390392,type:"apartment"},{name:"The Beverly at Medical Center",lat:30.2696224,lon:-97.735692,type:"apartment"},{name:"The Bowie",lat:30.2689101,lon:-97.7533905,type:"apartment"},{name:"The G",lat:30.2802583,lon:-97.7418612,type:"condo"},{name:"The Monarch by Windsor",lat:30.2690858,lon:-97.7520471,type:"apartment"},{name:"The Quincy",lat:30.2607964,lon:-97.7388694,type:"condo"},{name:"The Shoal",lat:30.2760586,lon:-97.7496873,type:"apartment"},{name:"The Waller",lat:30.2711278,lon:-97.7344463,type:"condo"},{name:"Whitley",lat:30.2650437,lon:-97.742201,type:"apartment"},{name:"Windsor on the Lake",lat:30.2559717,lon:-97.7396004,type:"apartment"},{name:"ATX Tower",lat:30.268662,lon:-97.7460608,type:"condo"},{name:"415 Colorado",lat:30.2672311,lon:-97.7442783,type:"condo"},{name:"Waterline",lat:30.2615462,lon:-97.7391219,type:"condo"},{name:"The Travis",lat:30.260094,lon:-97.7401425,type:"condo"},{name:"Paseo",lat:30.260094,lon:-97.7401425,type:"condo"},{name:"700 River",lat:30.2579816,lon:-97.7387225,type:"condo"},{name:"Austin Proper",lat:30.2662394,lon:-97.7499189,type:"condo"},{name:"Vesper",lat:30.2597364,lon:-97.7375573,type:"condo"},{name:"Plaza Lofts",lat:30.2679234,lon:-97.7464443,type:"condo"},{name:"1704 West Condos",lat:30.2815211,lon:-97.746815,type:"condo"},{name:"Four Seasons",lat:30.2619861,lon:-97.7432297,type:"condo"},{name:"The Modern",lat:30.2604192,lon:-97.7392711,type:"condo"},{name:"The Austonian",lat:30.2648019,lon:-97.7445985,type:"condo"},{name:"W Residences",lat:30.2655902,lon:-97.7465586,type:"condo"},{name:"The Linden",lat:30.2794998,lon:-97.7420515,type:"condo"},{name:"The Independent",lat:30.2677663,lon:-97.7512619,type:"condo"},{name:"70 Rainey",lat:30.2586803,lon:-97.7391402,type:"condo"},{name:"Natiivo",lat:30.2564815,lon:-97.7388538,type:"condo"},{name:"Seaholm Residences",lat:30.2671786,lon:-97.7521108,type:"condo"},{name:"44 East",lat:30.2558158,lon:-97.7390961,type:"condo"},{name:"5th & West",lat:30.2698622,lon:-97.7505104,type:"condo"},{name:"Nokonah",lat:30.2735314,lon:-97.7527068,type:"apartment"},{name:"360 Condos",lat:30.2672801,lon:-97.7497187,type:"condo"},{name:"Spring Condos",lat:30.2689443,lon:-97.7541734,type:"condo"},{name:"1306 West",lat:30.2779487,lon:-97.7481718,type:"condo"},{name:"Westgate Tower",lat:30.2741074,lon:-97.7428798,type:"condo"},{name:"904 West Condos",lat:30.2736945,lon:-97.7497312,type:"condo"},{name:"The Shore",lat:30.2593466,lon:-97.7393206,type:"condo"},{name:"Five Fifty 05",lat:30.265231,lon:-97.7381056,type:"condo"},{name:"Penthouse Condos",lat:30.275913,lon:-97.7441529,type:"condo"},{name:"Austin City Lofts",lat:30.2697168,lon:-97.7516014,type:"condo"},{name:"Brown Building",lat:30.2700066,lon:-97.7438733,type:"condo"},{name:"Cambridge Tower",lat:30.2807704,lon:-97.7403971,type:"condo"},{name:"Celias Court",lat:30.2731851,lon:-97.7473822,type:"condo"},{name:"Milago",lat:30.2569365,lon:-97.7397606,type:"condo"},{name:"Sabine on 5th",lat:30.2654934,lon:-97.7361143,type:"condo"},{name:"Brazos Place",lat:30.2698301,lon:-97.7408344,type:"condo"},{name:"Terrace on Shoal Creek",lat:30.2756567,lon:-97.7503839,type:"apartment"},{name:"Towers of Town Lake",lat:30.2550288,lon:-97.7379358,type:"condo"},{name:"Greenwood Tower",lat:30.2805409,lon:-97.7411384,type:"condo"}];let d=null,u=10,h=0,m=15,I=!1;const R=new Map;async function v(t,e,i,c=3.1,o,r=-10,C=15){const B=`${t},${e}`;if(!R.has(B)){const J=Cesium.Cartographic.fromDegrees(e,t),[Q]=await Cesium.sampleTerrainMostDetailed(s.terrainProvider,[J]);R.set(B,Q.height)}const z=R.get(B)+i*c,D=Cesium.Cartesian3.fromDegrees(e,t,z),A=Cesium.Math.toRadians(o),G=C*Math.sin(A),U=C*Math.cos(A),q=0,H=Cesium.Transforms.eastNorthUpToFixedFrame(D),V=new Cesium.Cartesian3(G,U,q),Y=Cesium.Matrix4.multiplyByPoint(H,V,new Cesium.Cartesian3);s.camera.setView({destination:Y,orientation:{heading:Cesium.Math.toRadians(o),pitch:Cesium.Math.toRadians(r),roll:0}}),s.camera.frustum.fov=Cesium.Math.toRadians(100),s.scene.requestRender()}const n=document.createElement("div");n.style.position="absolute";n.style.top="10px";n.style.left="10px";n.style.backgroundColor="rgba(0, 0, 0, 0.7)";n.style.color="white";n.style.padding="15px";n.style.borderRadius="5px";n.style.fontFamily="sans-serif";n.style.fontSize="14px";n.style.zIndex="1000";const b=document.createElement("div");b.textContent="Map data: Google 3D Tiles (Feb 2025)";b.style.fontSize="10px";b.style.color="#999";b.style.marginBottom="12px";b.style.textAlign="center";n.appendChild(b);const f=document.createElement("div");f.style.marginBottom="12px";f.style.display="flex";f.style.alignItems="center";f.style.gap="8px";const g=document.createElement("input");g.type="checkbox";g.id="apartmentFilter";g.checked=I;g.style.cursor="pointer";const T=document.createElement("label");T.htmlFor="apartmentFilter";T.textContent="Show Apartments";T.style.fontSize="12px";T.style.cursor="pointer";g.onchange=()=>{I=g.checked,P()};f.appendChild(g);f.appendChild(T);n.appendChild(f);const L=document.createElement("div");L.textContent="Building:";L.style.marginBottom="8px";L.style.fontWeight="bold";n.appendChild(L);const l=document.createElement("select");l.style.width="100%";l.style.padding="5px";l.style.marginBottom="15px";l.style.backgroundColor="#333";l.style.color="white";l.style.border="1px solid #555";l.style.borderRadius="3px";l.style.fontSize="14px";function P(){l.innerHTML="";const t=document.createElement("option");t.value="",t.textContent="Select a building",t.disabled=!0,t.selected=d===null,l.appendChild(t),x.forEach((e,i)=>{if(e.type==="condo"||I&&e.type==="apartment"){const c=document.createElement("option");c.value=i,c.textContent=e.name,d===i&&(c.selected=!0),l.appendChild(c)}})}l.onchange=()=>{if(l.value==="")return;d=parseInt(l.value);const t=x[d];v(t.lat,t.lon,u,3.1,h,-10,m)};P();n.appendChild(l);const S=document.createElement("div");S.textContent="Floor:";S.style.marginBottom="8px";S.style.fontWeight="bold";n.appendChild(S);const w=document.createElement("div");w.style.marginBottom="15px";const j=[5,10,15,20,25,30,35,40];j.forEach(t=>{const e=document.createElement("button");e.textContent=t,e.style.margin="2px",e.style.padding="5px 10px",e.style.backgroundColor=t===u?"#4CAF50":"#555",e.style.color="white",e.style.border="none",e.style.borderRadius="3px",e.style.cursor="pointer",e.onclick=()=>{if(u=t,$(),d!==null){const i=x[d];v(i.lat,i.lon,u,3.1,h,-10,m)}},e.dataset.floor=t,w.appendChild(e)});n.appendChild(w);const M=document.createElement("div");M.textContent="Direction:";M.style.marginBottom="8px";M.style.fontWeight="bold";n.appendChild(M);const k=document.createElement("div");k.style.marginBottom="15px";const Z=[{label:"N",heading:0},{label:"NE",heading:45},{label:"E",heading:90},{label:"SE",heading:135},{label:"S",heading:180},{label:"SW",heading:225},{label:"W",heading:270},{label:"NW",heading:315}];Z.forEach(t=>{const e=document.createElement("button");e.textContent=t.label,e.style.margin="2px",e.style.padding="5px 10px",e.style.backgroundColor=t.heading===h?"#4CAF50":"#555",e.style.color="white",e.style.border="none",e.style.borderRadius="3px",e.style.cursor="pointer",e.onclick=()=>{if(h=t.heading,K(),d!==null){const i=x[d];v(i.lat,i.lon,u,3.1,h,-10,m)}},e.dataset.heading=t.heading,k.appendChild(e)});n.appendChild(k);const E=document.createElement("div");E.textContent=`Edge offset (m): ${m}`;E.style.marginBottom="8px";E.style.fontWeight="bold";n.appendChild(E);const p=document.createElement("input");p.type="range";p.min="0";p.max="40";p.value=m.toString();p.style.width="100%";p.style.marginBottom="15px";p.oninput=()=>{if(m=parseInt(p.value),E.textContent=`Edge offset (m): ${m}`,d!==null){const t=x[d];v(t.lat,t.lon,u,3.1,h,-10,m)}};n.appendChild(p);document.body.appendChild(n);function $(){w.querySelectorAll("button").forEach(t=>{t.style.backgroundColor=parseInt(t.dataset.floor)===u?"#4CAF50":"#555"})}function K(){k.querySelectorAll("button").forEach(t=>{t.style.backgroundColor=parseInt(t.dataset.heading)===h?"#4CAF50":"#555"})}const W=setTimeout(()=>{console.log("Timeout: hiding loading overlay"),a.style.display="none"},1e4);N.readyPromise.then(()=>{console.log("Tileset ready"),clearTimeout(W),a.style.display="none",console.log("Loading complete, overlay hidden")}).catch(t=>{console.error("Error loading tileset:",t),clearTimeout(W),a.textContent="Error loading 3D tiles",a.style.backgroundColor="rgba(139, 0, 0, 0.8)"});
