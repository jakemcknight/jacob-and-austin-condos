(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))b(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&b(h)}).observe(document,{childList:!0,subtree:!0});function l(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function b(o){if(o.ep)return;o.ep=!0;const i=l(o);fetch(o.href,i)}})();Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwZmZlYmExOS05NTFkLTQxOTgtYmViMy0yMTg0MjY0YWI3N2EiLCJpZCI6Mzg3MTMwLCJpYXQiOjE3NzAyNDg0Nzd9.IqoW2git6t3j4YITrlQTN_U95ox-h-mfrMfON2aGyLw";const I="AIzaSyB5Tu2LL6QodOX-UOai4L_MsZn6GBvj5ec";console.log("GOOGLE KEY (first 6):",I.slice(0,6));const a=document.createElement("div");a.textContent="Loading 3Dâ€¦";a.style.position="absolute";a.style.top="50%";a.style.left="50%";a.style.transform="translate(-50%, -50%)";a.style.backgroundColor="rgba(0, 0, 0, 0.8)";a.style.color="white";a.style.padding="20px 40px";a.style.borderRadius="5px";a.style.fontFamily="sans-serif";a.style.fontSize="18px";a.style.zIndex="10000";document.body.appendChild(a);const r=new Cesium.Viewer("cesiumContainer",{terrain:Cesium.Terrain.fromWorldTerrain(),animation:!1,timeline:!1,baseLayerPicker:!1,geocoder:!1,homeButton:!1,sceneModePicker:!1,navigationHelpButton:!1,requestRenderMode:!0,maximumRenderTimeChange:1/0}),p=r.scene.screenSpaceCameraController;p.enableRotate=!1;p.enableTilt=!1;p.enableZoom=!1;p.enableLook=!0;p.enableTranslate=!1;p.lookEventTypes=[Cesium.CameraEventType.LEFT_DRAG];p.rotateEventTypes=[];p.tiltEventTypes=[];r.scene.preUpdate.addEventListener(()=>{Math.abs(r.camera.roll)>Cesium.Math.EPSILON6&&r.camera.setView({orientation:{heading:r.camera.heading,pitch:r.camera.pitch,roll:0}})});const R=`https://tile.googleapis.com/v1/3dtiles/root.json?key=${I}`;console.log("Tiles URL:",R);const B=await Cesium.Cesium3DTileset.fromUrl(R,{maximumScreenSpaceError:24,skipLevelOfDetail:!0,baseScreenSpaceError:1024,skipScreenSpaceErrorFactor:16,skipLevels:1,immediatelyLoadDesiredLevelOfDetail:!1,maximumMemoryUsage:512,cullWithChildrenBounds:!0});r.scene.primitives.add(B);const g=[{name:"3Waller",lat:30.2636556,lon:-97.7363348},{name:"404 Rio Grande",lat:30.2687242,lon:-97.7501364},{name:"Alexan Waterloo",lat:30.2710308,lon:-97.7338734},{name:"AMLI Downtown",lat:30.265293,lon:-97.746328},{name:"AMLI on 2nd",lat:30.2662019,lon:-97.7480112},{name:"Ashton Austin",lat:30.2641297,lon:-97.7453625},{name:"Camden Rainey Street",lat:30.2603388,lon:-97.738071},{name:"Capitol Quarters",lat:30.2750244,lon:-97.7466199},{name:"Elle West Ave",lat:30.268646,lon:-97.7530446},{name:"Gables Park Plaza",lat:30.2682716,lon:-97.7548273},{name:"Gables Park Tower",lat:30.2667539,lon:-97.7547424},{name:"Gables Republic Square",lat:30.2673738,lon:-97.7467997},{name:"Hanover Brazos St",lat:30.2645712,lon:-97.7424911},{name:"Hanover Republic",lat:30.267788,lon:-97.7459658},{name:"Lantana",lat:30.2823515,lon:-97.746431},{name:"Northshore",lat:30.2653566,lon:-97.7491832},{name:"Penthouse",lat:30.2817358,lon:-97.7448273},{name:"Residences at 6G",lat:30.2696502,lon:-97.7466781},{name:"Seven",lat:30.2705777,lon:-97.7488733},{name:"Sienna at the Thompson",lat:30.2669225,lon:-97.7416013},{name:"Skyhouse Austin",lat:30.257024,lon:-97.7390392},{name:"The Beverly at Medical Center",lat:30.2696224,lon:-97.735692},{name:"The Bowie",lat:30.2689101,lon:-97.7533905},{name:"The G",lat:30.2802583,lon:-97.7418612},{name:"The Monarch by Windsor",lat:30.2690858,lon:-97.7520471},{name:"The Quincy",lat:30.2607964,lon:-97.7388694},{name:"The Shoal",lat:30.2760586,lon:-97.7496873},{name:"The Waller",lat:30.2711278,lon:-97.7344463},{name:"Whitley",lat:30.2650437,lon:-97.742201},{name:"Windsor on the Lake",lat:30.2559717,lon:-97.7396004},{name:"ATX Tower",lat:30.268662,lon:-97.7460608},{name:"415 Colorado",lat:30.2672311,lon:-97.7442783},{name:"Waterline",lat:30.2615462,lon:-97.7391219},{name:"The Travis",lat:30.260094,lon:-97.7401425},{name:"Paseo",lat:30.260094,lon:-97.7401425},{name:"700 River",lat:30.2579816,lon:-97.7387225},{name:"Austin Proper",lat:30.2662394,lon:-97.7499189},{name:"Vesper",lat:30.2597364,lon:-97.7375573},{name:"Plaza Lofts",lat:30.2679234,lon:-97.7464443},{name:"1704 West Condos",lat:30.2815211,lon:-97.746815},{name:"Four Seasons",lat:30.2619861,lon:-97.7432297},{name:"The Modern",lat:30.2604192,lon:-97.7392711},{name:"The Austonian",lat:30.2648019,lon:-97.7445985},{name:"W Residences",lat:30.2655902,lon:-97.7465586},{name:"The Linden",lat:30.2794998,lon:-97.7420515},{name:"The Independent",lat:30.2677663,lon:-97.7512619},{name:"70 Rainey",lat:30.2586803,lon:-97.7391402},{name:"Natiivo",lat:30.2564815,lon:-97.7388538},{name:"Seaholm Residences",lat:30.2671786,lon:-97.7521108},{name:"44 East",lat:30.2558158,lon:-97.7390961},{name:"5th & West",lat:30.2698622,lon:-97.7505104},{name:"Nokonah",lat:30.2735314,lon:-97.7527068},{name:"360 Condos",lat:30.2672801,lon:-97.7497187},{name:"Spring Condos",lat:30.2689443,lon:-97.7541734},{name:"1306 West",lat:30.2779487,lon:-97.7481718},{name:"Westgate Tower",lat:30.2741074,lon:-97.7428798},{name:"904 West Condos",lat:30.2736945,lon:-97.7497312},{name:"The Shore",lat:30.2593466,lon:-97.7393206},{name:"Five Fifty 05",lat:30.265231,lon:-97.7381056},{name:"Penthouse Condos",lat:30.275913,lon:-97.7441529},{name:"Austin City Lofts",lat:30.2697168,lon:-97.7516014},{name:"Brown Building",lat:30.2700066,lon:-97.7438733},{name:"Cambridge Tower",lat:30.2807704,lon:-97.7403971},{name:"Celias Court",lat:30.2731851,lon:-97.7473822},{name:"Milago",lat:30.2569365,lon:-97.7397606},{name:"Sabine on 5th",lat:30.2654934,lon:-97.7361143},{name:"Brazos Place",lat:30.2698301,lon:-97.7408344},{name:"Terrace on Shoal Creek",lat:30.2756567,lon:-97.7503839},{name:"Towers of Town Lake",lat:30.2550288,lon:-97.7379358},{name:"Greenwood Tower",lat:30.2805409,lon:-97.7411384}];let y=0,c=10,u=0,d=15;const w=new Map;async function f(e,t,l,b=3.1,o,i=-10,h=15){const S=`${e},${t}`;if(!w.has(S)){const G=Cesium.Cartographic.fromDegrees(t,e),[D]=await Cesium.sampleTerrainMostDetailed(r.terrainProvider,[G]);w.set(S,D.height)}const W=w.get(S)+l*b,k=Cesium.Cartesian3.fromDegrees(t,e,W),M=Cesium.Math.toRadians(o),A=h*Math.sin(M),O=h*Math.cos(M),N=0,P=Cesium.Transforms.eastNorthUpToFixedFrame(k),F=new Cesium.Cartesian3(A,O,N),z=Cesium.Matrix4.multiplyByPoint(P,F,new Cesium.Cartesian3);r.camera.setView({destination:z,orientation:{heading:Cesium.Math.toRadians(o),pitch:Cesium.Math.toRadians(i),roll:0}}),r.camera.frustum.fov=Cesium.Math.toRadians(100),r.scene.requestRender()}const n=document.createElement("div");n.style.position="absolute";n.style.top="10px";n.style.left="10px";n.style.backgroundColor="rgba(0, 0, 0, 0.7)";n.style.color="white";n.style.padding="15px";n.style.borderRadius="5px";n.style.fontFamily="sans-serif";n.style.fontSize="14px";n.style.zIndex="1000";const x=document.createElement("div");x.textContent="Building:";x.style.marginBottom="8px";x.style.fontWeight="bold";n.appendChild(x);const s=document.createElement("select");s.style.width="100%";s.style.padding="5px";s.style.marginBottom="15px";s.style.backgroundColor="#333";s.style.color="white";s.style.border="1px solid #555";s.style.borderRadius="3px";s.style.fontSize="14px";g.forEach((e,t)=>{const l=document.createElement("option");l.value=t,l.textContent=e.name,s.appendChild(l)});s.onchange=()=>{y=parseInt(s.value);const e=g[y];f(e.lat,e.lon,c,3.1,u,-10,d)};n.appendChild(s);const T=document.createElement("div");T.textContent="Floor:";T.style.marginBottom="8px";T.style.fontWeight="bold";n.appendChild(T);const E=document.createElement("div");E.style.marginBottom="15px";const U=[5,10,15,20,25,30,35,40];U.forEach(e=>{const t=document.createElement("button");t.textContent=e,t.style.margin="2px",t.style.padding="5px 10px",t.style.backgroundColor=e===c?"#4CAF50":"#555",t.style.color="white",t.style.border="none",t.style.borderRadius="3px",t.style.cursor="pointer",t.onclick=()=>{c=e,H();const l=g[y];f(l.lat,l.lon,c,3.1,u,-10,d)},t.dataset.floor=e,E.appendChild(t)});n.appendChild(E);const v=document.createElement("div");v.textContent="Direction:";v.style.marginBottom="8px";v.style.fontWeight="bold";n.appendChild(v);const L=document.createElement("div");L.style.marginBottom="15px";const q=[{label:"N",heading:0},{label:"NE",heading:45},{label:"E",heading:90},{label:"SE",heading:135},{label:"S",heading:180},{label:"SW",heading:225},{label:"W",heading:270},{label:"NW",heading:315}];q.forEach(e=>{const t=document.createElement("button");t.textContent=e.label,t.style.margin="2px",t.style.padding="5px 10px",t.style.backgroundColor=e.heading===u?"#4CAF50":"#555",t.style.color="white",t.style.border="none",t.style.borderRadius="3px",t.style.cursor="pointer",t.onclick=()=>{u=e.heading,V();const l=g[y];f(l.lat,l.lon,c,3.1,u,-10,d)},t.dataset.heading=e.heading,L.appendChild(t)});n.appendChild(L);const C=document.createElement("div");C.textContent=`Edge offset (m): ${d}`;C.style.marginBottom="8px";C.style.fontWeight="bold";n.appendChild(C);const m=document.createElement("input");m.type="range";m.min="0";m.max="40";m.value=d.toString();m.style.width="100%";m.style.marginBottom="15px";m.oninput=()=>{d=parseInt(m.value),C.textContent=`Edge offset (m): ${d}`;const e=g[y];f(e.lat,e.lon,c,3.1,u,-10,d)};n.appendChild(m);document.body.appendChild(n);function H(){E.querySelectorAll("button").forEach(e=>{e.style.backgroundColor=parseInt(e.dataset.floor)===c?"#4CAF50":"#555"})}function V(){L.querySelectorAll("button").forEach(e=>{e.style.backgroundColor=parseInt(e.dataset.heading)===u?"#4CAF50":"#555"})}B.readyPromise.then(async()=>{const e=g[y];await f(e.lat,e.lon,c,3.1,u,-10,d),a.style.display="none"}).catch(e=>{console.error("Error loading tileset:",e),a.textContent="Error loading 3D tiles",a.style.backgroundColor="rgba(139, 0, 0, 0.8)"});
